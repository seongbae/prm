import{i as T,H as u,h as a,a as l,t as n,j as i,b as g,F as f,k as m,d as p,n as b,o,w}from"./app-BmMnv7Hf.js";import{T as v}from"./TextInput-DPfNN3hz.js";import{E as _}from"./Errors-DkF-M9C7.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={components:{InertiaLink:T,TextInput:v,Errors:_},props:{data:{type:Object,default:null}},data(){return{editTagModalShown:!1,localTags:[],localTagsInVault:[],form:{search:"",name:"",errors:[]}}},computed:{filteredTags(){return this.localTagsInVault.filter(e=>e.name.toLowerCase().indexOf(this.form.search.toLowerCase())>-1)}},created(){this.localTags=this.data.tags_in_post,this.localTagsInVault=this.data.tags_in_vault},methods:{showEditModal(){this.form.name="",this.editTagModalShown=!0,this.$nextTick().then(()=>{this.$refs.tag.focus()})},store(){this.form.name=this.form.search,axios.post(this.data.url.tag_store,this.form).then(e=>{this.flash(this.$t("The tag has been added"),"success"),this.form.search="",this.localTagsInVault.push(e.data.data),this.localTags.push(e.data.data)}).catch(e=>{this.form.errors=e.response.data})},set(e){if(e.taken){this.remove(e);return}axios.put(e.url.update).then(t=>{this.localTagsInVault[this.localTagsInVault.findIndex(h=>h.id===e.id)]=t.data.data,this.localTags.push(t.data.data)}).catch(t=>{this.form.errors=t.response.data})},remove(e){axios.delete(e.url.destroy).then(t=>{this.localTagsInVault[this.localTagsInVault.findIndex(c=>c.id===e.id)]=t.data.data;var h=this.localTags.findIndex(c=>c.id===e.id);this.localTags.splice(h,1)}).catch(t=>{this.form.errors=t.response.data})}}},C={class:"mb-8"},M={class:"mb-2 flex items-center justify-between font-bold"},E={key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},S={class:"border-b border-gray-200 p-2 dark:border-gray-700"},L=["onClick"],j={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-green-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},N={class:"italic"},B={key:1,class:"border-b border-gray-200 px-3 py-2 text-sm text-gray-600 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 dark:text-gray-400 hover:dark:bg-slate-800"},F={class:"flex flex-wrap"},O={key:1,class:"text-sm text-gray-600 dark:text-gray-400"};function P(e,t,h,c,s,d){const k=u("errors"),y=u("text-input"),x=u("InertiaLink");return o(),a("div",C,[l("p",M,[l("span",null,n(e.$t("Tags")),1),s.editTagModalShown?i("",!0):(o(),a("span",{key:0,class:"relative cursor-pointer text-xs text-gray-600 dark:text-gray-400",onClick:t[0]||(t[0]=(...r)=>d.showEditModal&&d.showEditModal(...r))},n(e.$t("Edit")),1)),s.editTagModalShown?(o(),a("span",{key:1,class:"cursor-pointer text-xs text-gray-600 dark:text-gray-400",onClick:t[1]||(t[1]=r=>s.editTagModalShown=!1)},n(e.$t("Close")),1)):i("",!0)]),s.editTagModalShown?(o(),a("div",E,[l("div",S,[g(k,{errors:s.form.errors},null,8,["errors"]),g(y,{ref:"tag",modelValue:s.form.search,"onUpdate:modelValue":t[2]||(t[2]=r=>s.form.search=r),type:"text",placeholder:e.$t("Filter list or create a new tag"),autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,onEscKeyPressed:t[3]||(t[3]=r=>s.editTagModalShown=!1)},null,8,["modelValue","placeholder"])]),l("ul",{class:b(["tag-list overflow-auto bg-white dark:bg-gray-900",d.filteredTags.length>0?"h-40":""])},[(o(!0),a(f,null,m(d.filteredTags,r=>(o(),a("li",{key:r.id,class:"flex cursor-pointer items-center justify-between border-b border-gray-200 px-3 py-2 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onClick:q=>d.set(r)},[l("div",null,[l("span",{class:b(["me-2 inline-block h-4 w-4 rounded-full",r.bg_color])},null,2),l("span",null,n(r.name),1)]),r.taken?(o(),a("svg",j,t[5]||(t[5]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):i("",!0)],8,L))),128)),d.filteredTags.length===0&&s.form.search.length!==""?(o(),a("li",{key:0,class:"cursor-pointer border-b border-gray-200 px-3 py-2 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onClick:t[4]||(t[4]=r=>d.store())},[p(n(e.$t("Create new tag"))+" ",1),l("span",N,'"'+n(s.form.search)+'"',1)])):i("",!0),d.filteredTags.length===0&&s.form.search.length===""?(o(),a("li",B,n(e.$t("Please type a few characters to create a new tag.")),1)):i("",!0)],2)])):i("",!0),l("div",F,[(o(!0),a(f,null,m(s.localTags,r=>(o(),a("span",{key:r.id,class:"me-2 inline-block rounded bg-neutral-200 px-2 py-1 text-xs font-semibold text-neutral-500 last:me-0"},[g(x,{href:r.url.show},{default:w(()=>[p(n(r.name),1)]),_:2},1032,["href"])]))),128))]),s.localTags.length===0?(o(),a("p",O,n(e.$t("Not set")),1)):i("",!0)])}const U=I(V,[["render",P],["__scopeId","data-v-a7a120f7"]]);export{U as default};
