import{i as V,H as n,c as w,w as f,o as d,a as t,t as r,b as l,d as g,j as m,h,n as p,l as y}from"./app-BmMnv7Hf.js";import{L as C}from"./Layout-Csq83W0y.js";import{P as M}from"./PrettyButton-DJ97II5T.js";import{P as H}from"./PrettySpan-DbeWKi_L.js";import{T as I}from"./TextInput-DPfNN3hz.js";import{E as j}from"./Errors-DkF-M9C7.js";import{d as T}from"./vuedraggable.umd-h0yOulbD.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={components:{InertiaLink:V,Layout:C,PrettyButton:M,PrettySpan:H,TextInput:I,Errors:j,draggable:T},props:{layoutData:{type:Object,default:null},data:{type:Object,default:null}},data(){return{loadingState:"",createGiftStateModalShown:!1,editGiftStateId:0,localGiftStates:[],form:{label:"",position:"",errors:[]}}},mounted(){this.localGiftStates=this.data.gift_states},methods:{showGiftStateModal(){this.form.label="",this.form.position="",this.createGiftStateModalShown=!0,this.editGiftStateId=0,this.$nextTick().then(()=>{this.$refs.newGiftState.focus()})},renameGiftStateModal(s){this.form.label=s.label,this.editGiftStateId=s.id,this.createGiftStateModalShown=!1,this.$nextTick().then(()=>this.$refs.rename.focus())},submit(){this.loadingState="loading",axios.post(this.data.url.store,this.form).then(s=>{this.flash(this.$t("The gift state has been created"),"success"),this.localGiftStates.push(s.data.data),this.loadingState=null,this.createGiftStateModalShown=!1}).catch(s=>{this.loadingState=null,this.form.errors=s.response.data})},update(s){this.loadingState="loading",axios.put(s.url.update,this.form).then(e=>{this.flash(this.$t("The gift state has been updated"),"success"),this.localGiftStates[this.localGiftStates.findIndex(i=>i.id===s.id)]=e.data.data,this.loadingState=null,this.editGiftStateId=0}).catch(e=>{this.loadingState=null,this.form.errors=e.response.data})},destroy(s){confirm(this.$t("Are you sure? This action cannot be undone."))&&axios.delete(s.url.destroy).then(()=>{this.flash(this.$t("The gift state has been deleted"),"success");var e=this.localGiftStates.findIndex(i=>i.id===s.id);this.localGiftStates.splice(e,1)}).catch(e=>{this.loadingState=null,this.form.errors=e.response.data})},updatePosition(s){this.form.position=s.moved.newIndex+1,axios.post(s.moved.element.url.position,this.form).then(()=>{this.flash(this.$t("The position has been saved"),"success")}).catch(e=>{this.loadingState=null,this.errors=e.response.data})}}},$={class:"bg-white dark:bg-gray-900 sm:border-b"},B={class:"max-w-8xl mx-auto hidden px-4 py-2 sm:px-6 md:block"},N={class:"flex items-baseline justify-between space-x-6"},E={class:"text-sm"},L={class:"me-2 inline text-gray-600 dark:text-gray-400"},D={class:"me-2 inline"},z={class:"me-2 inline"},A={class:"inline"},q={class:"relative sm:mt-20"},K={class:"mx-auto max-w-3xl px-2 py-2 sm:px-6 sm:py-6 lg:px-8"},O={class:"mb-6 mt-8 items-center justify-between sm:mt-0 sm:flex"},R={class:"mb-4 sm:mb-0"},U={class:"border-b border-gray-200 p-5 dark:border-gray-700"},Y={class:"flex justify-between p-5"},F={key:1,class:"mb-6"},J={key:0,class:"list-icon"},Q={class:"item-list mb-2 flex items-center justify-between rounded-lg border border-gray-200 bg-white py-2 pe-5 ps-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-gray-900 hover:dark:bg-slate-800"},W={class:"me-2 flex"},X={class:"text-sm"},tt=["onClick"],et={class:"text-blue-500 hover:underline"},st=["onClick"],ot=["onSubmit"],lt={class:"border-b border-gray-200 p-5 dark:border-gray-700"},at={class:"flex justify-between p-5"},rt={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},it={class:"p-5 text-center"};function nt(s,e,i,dt,o,u){const v=n("InertiaLink"),b=n("pretty-button"),S=n("errors"),x=n("text-input"),k=n("pretty-span"),_=n("draggable"),G=n("layout");return d(),w(G,{"layout-data":i.layoutData},{default:f(()=>[t("nav",$,[t("div",B,[t("div",N,[t("ul",E,[t("li",L,r(s.$t("You are here:")),1),t("li",D,[l(v,{href:i.data.url.settings,class:"text-blue-500 hover:underline"},{default:f(()=>[g(r(s.$t("Settings")),1)]),_:1},8,["href"])]),e[7]||(e[7]=t("li",{class:"relative me-2 inline"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),t("li",z,[l(v,{href:i.data.url.personalize,class:"text-blue-500 hover:underline"},{default:f(()=>[g(r(s.$t("Personalize your account")),1)]),_:1},8,["href"])]),e[8]||(e[8]=t("li",{class:"relative me-2 inline"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),t("li",A,r(s.$t("Gift states")),1)])])])]),t("main",q,[t("div",K,[t("div",O,[t("h3",R,[e[9]||(e[9]=t("span",{class:"me-1"}," 🎁 ",-1)),g(" "+r(s.$t("All the gift states")),1)]),o.createGiftStateModalShown?m("",!0):(d(),w(b,{key:0,text:s.$t("Add a gift state"),icon:"plus",onClick:u.showGiftStateModal},null,8,["text","onClick"]))]),o.createGiftStateModalShown?(d(),h("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:e[3]||(e[3]=y(a=>u.submit(),["prevent"]))},[t("div",U,[l(S,{errors:o.form.errors},null,8,["errors"]),l(x,{ref:"newGiftState",modelValue:o.form.label,"onUpdate:modelValue":e[0]||(e[0]=a=>o.form.label=a),label:s.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[1]||(e[1]=a=>o.createGiftStateModalShown=!1)},null,8,["modelValue","label"])]),t("div",Y,[l(k,{text:s.$t("Cancel"),class:p("me-3"),onClick:e[2]||(e[2]=a=>o.createGiftStateModalShown=!1)},null,8,["text"]),l(b,{text:s.$t("Save"),state:o.loadingState,icon:"plus",class:p("save")},null,8,["text","state"])])],32)):m("",!0),o.localGiftStates.length>0?(d(),h("div",F,[l(_,{list:o.localGiftStates,"item-key":"id","component-data":{name:"fade"},handle:".handle",onChange:u.updatePosition},{item:f(({element:a})=>[o.editGiftStateId!==a.id?(d(),h("div",J,[t("div",Q,[t("div",W,[e[10]||(e[10]=t("svg",{class:"handle me-2 cursor-move",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M7 7H9V9H7V7Z",fill:"currentColor"}),t("path",{d:"M11 7H13V9H11V7Z",fill:"currentColor"}),t("path",{d:"M17 7H15V9H17V7Z",fill:"currentColor"}),t("path",{d:"M7 11H9V13H7V11Z",fill:"currentColor"}),t("path",{d:"M13 11H11V13H13V11Z",fill:"currentColor"}),t("path",{d:"M15 11H17V13H15V11Z",fill:"currentColor"}),t("path",{d:"M9 15H7V17H9V15Z",fill:"currentColor"}),t("path",{d:"M11 15H13V17H11V15Z",fill:"currentColor"}),t("path",{d:"M17 15H15V17H17V15Z",fill:"currentColor"})],-1)),t("span",null,r(a.label),1)]),t("ul",X,[t("li",{class:"inline cursor-pointer",onClick:c=>u.renameGiftStateModal(a)},[t("span",et,r(s.$t("Rename")),1)],8,tt),t("li",{class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:c=>u.destroy(a)},r(s.$t("Delete")),9,st)])]),e[11]||(e[11]=t("div",{class:"state-list-icon mb-3 ms-3"},"👇",-1))])):(d(),h("form",{key:1,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:y(c=>u.update(a),["prevent"])},[t("div",lt,[l(S,{errors:o.form.errors},null,8,["errors"]),l(x,{ref:"rename",modelValue:o.form.label,"onUpdate:modelValue":e[4]||(e[4]=c=>o.form.label=c),label:s.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[5]||(e[5]=c=>o.editGiftStateId=0)},null,8,["modelValue","label"])]),t("div",at,[l(k,{text:s.$t("Cancel"),class:p("me-3"),onClick:e[6]||(e[6]=y(c=>o.editGiftStateId=0,["prevent"]))},null,8,["text"]),l(b,{text:s.$t("Rename"),state:o.loadingState,icon:"check",class:p("save")},null,8,["text","state"])])],40,ot))]),_:1},8,["list","onChange"])])):m("",!0),o.localGiftStates.length===0?(d(),h("div",rt,[t("p",it,r(s.$t("Gift states let you define the various states for your gifts.")),1)])):m("",!0)])])]),_:1},8,["layout-data"])}const yt=P(Z,[["render",nt],["__scopeId","data-v-5dc13ef0"]]);export{yt as default};
