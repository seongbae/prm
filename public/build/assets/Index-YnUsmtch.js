import{i as M,H as b,c as P,w as v,o as c,a as e,t as i,b as a,d as _,j as p,h,n as u,l as y}from"./app-BmMnv7Hf.js";import{L as V}from"./Layout-Csq83W0y.js";import{P as I}from"./PrettyButton-DJ97II5T.js";import{P as H}from"./PrettySpan-DbeWKi_L.js";import{T as Z}from"./TextInput-DPfNN3hz.js";import{E as j}from"./Errors-DkF-M9C7.js";import{d as $}from"./vuedraggable.umd-h0yOulbD.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={components:{InertiaLink:M,Layout:V,PrettyButton:I,PrettySpan:H,TextInput:Z,Errors:j,draggable:$},props:{layoutData:{type:Object,default:null},data:{type:Object,default:null}},data(){return{loadingState:"",createPostTemplateModalShown:!1,createSectionModalShown:!1,postTemplateId:0,editPostTemplateId:0,editSectionId:0,localPostTemplates:[],form:{label:"",position:"",errors:[]}}},mounted(){this.localPostTemplates=this.data.post_templates},methods:{showCreatePostTemplateModal(){this.form.label="",this.form.position="",this.createPostTemplateModalShown=!0,this.postTemplateId=0,this.createSectionModalShown=!1,this.editPostTemplateId=0,this.editSectionId=0,this.$nextTick().then(()=>this.$refs.newPostTemplate.focus())},showCreateSectionModal(s){this.form.label="",this.form.position="",this.createSectionModalShown=!0,this.postTemplateId=s.id,this.createPostTemplateModalShown=!1,this.editPostTemplateId=0,this.editSectionId=0,this.$nextTick().then(()=>this.$refs.newSection.focus())},renamePostTemplateModal(s){this.form.label=s.label,this.editPostTemplateId=s.id,this.createSectionModalShown=!1,this.editSectionId=0,this.createPostTemplateModalShown=!1,this.postTemplateId=0,this.$nextTick().then(()=>this.$refs.renamePostTemplate.focus())},renameSectionModal(s){this.form.label=s.label,this.editSectionId=s.id,this.createSectionModalShown=!1,this.createPostTemplateModalShown=!1,this.editPostTemplateId=0,this.postTemplateId=0,this.$nextTick().then(()=>this.$refs.renameSection.focus())},submit(){this.loadingState="loading",axios.post(this.data.url.store,this.form).then(s=>{this.flash(this.$t("The post template has been created"),"success"),this.localPostTemplates.push(s.data.data),this.loadingState=null,this.createPostTemplateModalShown=!1}).catch(s=>{this.loadingState=null,this.form.errors=s.response.data})},update(s){this.loadingState="loading",axios.put(s.url.update,this.form).then(t=>{this.flash(this.$t("The post template has been updated"),"success"),this.localPostTemplates[this.localPostTemplates.findIndex(n=>n.id===s.id)]=t.data.data,this.loadingState=null,this.editPostTemplateId=0}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},destroy(s){confirm(this.$t("Are you sure? This action cannot be undone."))&&axios.delete(s.url.destroy).then(()=>{this.flash(this.$t("The post template has been deleted"),"success");var t=this.localPostTemplates.findIndex(n=>n.id===s.id);this.localPostTemplates.splice(t,1)}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},updatePosition(s){this.form.position=s.moved.newIndex+1,axios.post(s.moved.element.url.position,this.form).then(()=>{this.flash(this.$t("The position has been saved"),"success")}).catch(t=>{this.loadingState=null,this.errors=t.response.data})},submitSection(s){this.loadingState="loading",axios.post(s.url.store,this.form).then(t=>{this.flash(this.$t("The section has been created"),"success");var n=this.localPostTemplates.findIndex(m=>m.id===s.id);this.localPostTemplates[n].post_template_sections.push(t.data.data),this.loadingState=null,this.postTemplateId=0,this.createSectionModalShown=!1}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},updateSection(s){this.loadingState="loading",axios.put(s.url.update,this.form).then(t=>{this.flash(this.$t("The section has been updated"),"success");var n=this.localPostTemplates.findIndex(o=>o.id===s.post_template_id),m=this.localPostTemplates[n].post_template_sections.findIndex(o=>o.id===s.id);this.localPostTemplates[n].post_template_sections[m]=t.data.data,this.loadingState=null,this.postTemplateId=0,this.editSectionId=0}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},destroySection(s){confirm(this.$t("Are you sure? This action cannot be undone."))&&axios.delete(s.url.destroy).then(()=>{this.flash(this.$t("The section has been deleted"),"success");var t=this.localPostTemplates.findIndex(m=>m.id===s.post_template_id),n=this.localPostTemplates[t].post_template_sections.findIndex(m=>m.id===s.id);this.localPostTemplates[t].post_template_sections.splice(n,1)}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})}}},E={class:"bg-white dark:bg-gray-900 sm:border-b"},D={class:"max-w-8xl mx-auto hidden px-4 py-2 sm:px-6 md:block"},L={class:"flex items-baseline justify-between space-x-6"},q={class:"text-sm"},z={class:"me-2 inline text-gray-600 dark:text-gray-400"},A={class:"me-2 inline"},K={class:"me-2 inline"},R={class:"inline"},U={class:"relative sm:mt-20"},O={class:"mx-auto max-w-3xl px-2 py-2 sm:px-6 sm:py-6 lg:px-8"},Y={class:"mb-6 mt-8 items-center justify-between sm:mt-0 sm:flex"},F={class:"mb-4 sm:mb-0"},G={class:"mb-6 flex rounded border bg-slate-50 px-3 py-2 text-sm dark:border-gray-700 dark:bg-slate-900"},J={class:"border-b border-gray-200 p-5 dark:border-gray-700"},Q={class:"flex justify-between p-5"},W={key:1,class:"mb-6"},X={key:0},ee={class:"item-list mb-2 rounded-lg border border-gray-200 bg-white py-2 pe-5 ps-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-gray-900 hover:dark:bg-slate-800"},te={class:"mb-3 flex items-center justify-between"},se={class:"me-2 flex"},oe={class:"text-sm"},le=["onClick"],ae={class:"text-blue-500 hover:underline"},re=["onClick"],ie={class:"ms-8"},ne={class:"mb-1 text-sm text-gray-500"},de={key:0},ce={class:"item-list mb-2 rounded-lg border border-gray-200 bg-white py-2 pe-5 ps-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-gray-900 hover:dark:bg-slate-800"},he={class:"flex items-center justify-between"},me={class:"me-2 flex"},pe={class:"text-sm"},ue=["onClick"],be={class:"text-blue-500 hover:underline"},fe=["onClick"],ge=["onSubmit"],ve={class:"border-b border-gray-200 p-5 dark:border-gray-700"},ye={class:"flex justify-between p-5"},we=["onClick"],Se=["onSubmit"],ke={class:"border-b border-gray-200 p-5 dark:border-gray-700"},_e={class:"flex justify-between p-5"},xe={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},Te={class:"p-5 text-center"},Pe=["onClick"],Ce=["onSubmit"],Me={class:"border-b border-gray-200 p-5 dark:border-gray-700"},Ve={class:"flex justify-between p-5"};function Ie(s,t,n,m,o,d){const x=b("InertiaLink"),g=b("pretty-button"),w=b("errors"),S=b("text-input"),k=b("pretty-span"),T=b("draggable"),C=b("layout");return c(),P(C,{"layout-data":n.layoutData},{default:v(()=>[e("nav",E,[e("div",D,[e("div",L,[e("ul",q,[e("li",z,i(s.$t("You are here:")),1),e("li",A,[a(x,{href:n.data.url.settings,class:"text-blue-500 hover:underline"},{default:v(()=>[_(i(s.$t("Settings")),1)]),_:1},8,["href"])]),t[13]||(t[13]=e("li",{class:"relative me-2 inline"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("li",K,[a(x,{href:n.data.url.personalize,class:"text-blue-500 hover:underline"},{default:v(()=>[_(i(s.$t("Personalize your account")),1)]),_:1},8,["href"])]),t[14]||(t[14]=e("li",{class:"relative me-2 inline"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("li",R,i(s.$t("Post templates")),1)])])])]),e("main",U,[e("div",O,[e("div",Y,[e("h3",F,[t[15]||(t[15]=e("span",{class:"me-1"}," ðŸ“® ",-1)),_(" "+i(s.$t("Post templates")),1)]),o.createPostTemplateModalShown?p("",!0):(c(),P(g,{key:0,text:s.$t("Add a post template"),icon:"plus",onClick:d.showCreatePostTemplateModal},null,8,["text","onClick"]))]),e("div",G,[t[16]||(t[16]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 grow pe-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[e("p",null,i(s.$t("A post template defines how the content of a post should be displayed. You can define as many templates as you want, and choose which template should be used on which post.")),1)])]),o.createPostTemplateModalShown?(c(),h("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:t[3]||(t[3]=y(l=>d.submit(),["prevent"]))},[e("div",J,[a(w,{errors:o.form.errors},null,8,["errors"]),a(S,{ref:"newPostTemplate",modelValue:o.form.label,"onUpdate:modelValue":t[0]||(t[0]=l=>o.form.label=l),label:s.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:t[1]||(t[1]=l=>o.createPostTemplateModalShown=!1)},null,8,["modelValue","label"])]),e("div",Q,[a(k,{text:s.$t("Cancel"),class:u("me-3"),onClick:t[2]||(t[2]=l=>o.createPostTemplateModalShown=!1)},null,8,["text"]),a(g,{text:s.$t("Save"),state:o.loadingState,icon:"plus",class:u("save")},null,8,["text","state"])])],32)):p("",!0),o.localPostTemplates.length>0?(c(),h("div",W,[a(T,{list:o.localPostTemplates,"item-key":"id","component-data":{name:"fade"},handle:".handle",onChange:d.updatePosition},{item:v(({element:l})=>[o.editPostTemplateId!==l.id?(c(),h("div",X,[e("div",ee,[e("div",te,[e("div",se,[t[17]||(t[17]=e("svg",{class:"handle me-2 cursor-move",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7 7H9V9H7V7Z",fill:"currentColor"}),e("path",{d:"M11 7H13V9H11V7Z",fill:"currentColor"}),e("path",{d:"M17 7H15V9H17V7Z",fill:"currentColor"}),e("path",{d:"M7 11H9V13H7V11Z",fill:"currentColor"}),e("path",{d:"M13 11H11V13H13V11Z",fill:"currentColor"}),e("path",{d:"M15 11H17V13H15V11Z",fill:"currentColor"}),e("path",{d:"M9 15H7V17H9V15Z",fill:"currentColor"}),e("path",{d:"M11 15H13V17H11V15Z",fill:"currentColor"}),e("path",{d:"M17 15H15V17H17V15Z",fill:"currentColor"})],-1)),e("span",null,i(l.label),1)]),e("ul",oe,[e("li",{class:"inline cursor-pointer",onClick:r=>d.renamePostTemplateModal(l)},[e("span",ae,i(s.$t("Rename")),1)],8,le),l.can_be_deleted?(c(),h("li",{key:0,class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:r=>d.destroy(l)},i(s.$t("Delete")),9,re)):p("",!0)])]),e("div",ie,[e("p",ne,i(s.$t("Sections:")),1),a(T,{list:l.post_template_sections,"item-key":"id","component-data":{name:"fade"},handle:".handle",onChange:d.updatePosition},{item:v(({element:r})=>[o.editSectionId!==r.id?(c(),h("div",de,[e("div",ce,[e("div",he,[e("div",me,[t[18]||(t[18]=e("svg",{class:"handle me-2 cursor-move",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7 7H9V9H7V7Z",fill:"currentColor"}),e("path",{d:"M11 7H13V9H11V7Z",fill:"currentColor"}),e("path",{d:"M17 7H15V9H17V7Z",fill:"currentColor"}),e("path",{d:"M7 11H9V13H7V11Z",fill:"currentColor"}),e("path",{d:"M13 11H11V13H13V11Z",fill:"currentColor"}),e("path",{d:"M15 11H17V13H15V11Z",fill:"currentColor"}),e("path",{d:"M9 15H7V17H9V15Z",fill:"currentColor"}),e("path",{d:"M11 15H13V17H11V15Z",fill:"currentColor"}),e("path",{d:"M17 15H15V17H17V15Z",fill:"currentColor"})],-1)),e("span",null,i(r.label),1)]),e("ul",pe,[e("li",{class:"inline cursor-pointer text-blue-500 hover:underline",onClick:f=>d.renameSectionModal(r)},[e("span",be,i(s.$t("Rename")),1)],8,ue),l.can_be_deleted?(c(),h("li",{key:0,class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:f=>d.destroySection(r)},i(s.$t("Delete")),9,fe)):p("",!0)])])])])):(c(),h("form",{key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:y(f=>d.updateSection(r),["prevent"])},[e("div",ve,[a(w,{errors:o.form.errors},null,8,["errors"]),a(S,{ref:"renameSection",modelValue:o.form.label,"onUpdate:modelValue":t[4]||(t[4]=f=>o.form.label=f),label:s.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:t[5]||(t[5]=f=>o.editSectionId=0)},null,8,["modelValue","label"])]),e("div",ye,[a(k,{text:s.$t("Cancel"),class:u("me-3"),onClick:t[6]||(t[6]=f=>o.editSectionId=0)},null,8,["text"]),a(g,{text:s.$t("Rename"),state:o.loadingState,icon:"check",class:u("save")},null,8,["text","state"])])],40,ge))]),_:2},1032,["list","onChange"]),l.post_template_sections.length!==0&&!o.createSectionModalShown&&o.postTemplateId!==l.id?(c(),h("span",{key:0,class:"inline cursor-pointer text-sm text-blue-500 hover:underline",onClick:r=>d.showCreateSectionModal(l)},i(s.$t("add a section")),9,we)):p("",!0),o.createSectionModalShown&&o.postTemplateId===l.id?(c(),h("form",{key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:y(r=>d.submitSection(l),["prevent"])},[e("div",ke,[a(w,{errors:o.form.errors},null,8,["errors"]),a(S,{ref:"newSection",modelValue:o.form.label,"onUpdate:modelValue":t[7]||(t[7]=r=>o.form.label=r),label:s.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:t[8]||(t[8]=r=>{o.createSectionModalShown=!1,o.postTemplateId=0})},null,8,["modelValue","label"])]),e("div",_e,[a(k,{text:s.$t("Cancel"),class:u("me-3"),onClick:t[9]||(t[9]=r=>{o.createSectionModalShown=!1,o.postTemplateId=0})},null,8,["text"]),a(g,{text:s.$t("Save"),state:o.loadingState,icon:"plus",class:u("save")},null,8,["text","state"])])],40,Se)):p("",!0),l.post_template_sections.length===0&&!o.createSectionModalShown&&o.postTemplateId!==l.id?(c(),h("div",xe,[e("p",Te,[_(i(s.$t("No roles yet."))+" ",1),e("span",{class:"block cursor-pointer text-sm text-blue-500 hover:underline",onClick:r=>d.showCreateSectionModal(l)},i(s.$t("add a section")),9,Pe)])])):p("",!0)])])])):(c(),h("form",{key:1,class:"item-list mb-2 rounded-lg border border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:y(r=>d.update(l),["prevent"])},[e("div",Me,[a(w,{errors:o.form.errors},null,8,["errors"]),a(S,{ref:"renamePostTemplate",modelValue:o.form.label,"onUpdate:modelValue":t[10]||(t[10]=r=>o.form.label=r),label:s.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:t[11]||(t[11]=r=>o.editPostTemplateId=0)},null,8,["modelValue","label"])]),e("div",Ve,[a(k,{text:s.$t("Cancel"),class:u("me-3"),onClick:t[12]||(t[12]=y(r=>o.editPostTemplateId=0,["prevent"]))},null,8,["text"]),a(g,{text:s.$t("Rename"),state:o.loadingState,icon:"check",class:u("save")},null,8,["text","state"])])],40,Ce))]),_:1},8,["list","onChange"])])):p("",!0)])])]),_:1},8,["layout-data"])}const Le=B(N,[["render",Ie],["__scopeId","data-v-e8cab11d"]]);export{Le as default};
