import{r as h,T as A,h as i,a as e,d as U,t as m,c as z,j as k,l as x,b as u,u as s,F as V,k as C,n as p,w as D,A as M,o as n,x as $,bP as H,p as R}from"./app-BmMnv7Hf.js";import{d as q}from"./vuedraggable.umd-h0yOulbD.js";import{P as y}from"./PrettyButton-DJ97II5T.js";import{P}from"./PrettySpan-DbeWKi_L.js";import{T}from"./TextInput-DPfNN3hz.js";import{E as Z}from"./Errors-DkF-M9C7.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"mb-12"},L={class:"mb-3 mt-8 items-center justify-between sm:mt-0 sm:flex"},O={class:"mb-4 sm:mb-0"},Y={class:"border-b border-gray-200 p-5 dark:border-gray-700"},G={class:"mb-2 block text-sm"},J={class:"grid grid-cols-8 gap-4"},Q=["id","value","onClick"],W=["for"],X={class:"flex justify-between p-5"},ee={class:"mb-4 flex rounded border border-gray-200 bg-slate-50 px-3 py-2 dark:border-gray-700 dark:bg-slate-900"},te={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},re={key:0,class:"item-list flex items-center justify-between border-b border-gray-200 py-2 pe-5 ps-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},oe={class:"me-2 flex items-center"},ae={class:"me-2"},le={class:"text-sm"},se=["onClick"],ne=["onClick"],de=["onSubmit"],ie={class:"border-b border-gray-200 p-5 dark:border-gray-700"},ue={class:"mb-2 block text-sm"},ce={class:"grid grid-cols-8 gap-4"},me=["id","value","onClick"],pe=["for"],be={class:"flex justify-between p-5"},ve={key:2,class:"rounded-lg bg-white dark:border-gray-700 dark:bg-gray-900"},he={__name:"MoodTrackingParameters",props:{data:Object},setup(f){const _=f,d=h(""),c=h(_.data.mood_tracking_parameters),b=h(!1),v=h(0),g=h(null),o=A({label:"",hex_color:"",position:"",errors:[]}),S=()=>{o.label="",o.position="",b.value=!0,M().then(()=>g.value.focus())},j=r=>{o.label=r.label,o.hex_color=r.hex_color,v.value=r.id,M().then(()=>g.value.focus())},B=()=>{d.value="loading",axios.post(_.data.url.mood_tracking_parameter_store,o).then(r=>{c.value.push(r.data.data),d.value=null,b.value=!1}).catch(r=>{d.value=null,o.errors=r.response.data})},I=r=>{d.value="loading",axios.put(r.url.update,o).then(t=>{c.value[c.value.findIndex(a=>a.id===r.id)]=t.data.data,d.value=null,v.value=0}).catch(t=>{d.value=null,o.errors=t.response.data})},N=r=>{confirm(R("Are you sure? This action cannot be undone."))&&axios.delete(r.url.destroy).then(()=>{var t=c.value.findIndex(a=>a.id===r.id);c.value.splice(t,1)}).catch(t=>{d.value=null,o.errors=t.response.data})},E=r=>{o.position=r.moved.newIndex+1,axios.put(r.moved.element.url.position,o).catch(t=>{d.value=null,o.errors=t.response.data})};return(r,t)=>(n(),i("div",K,[e("div",L,[e("h3",O,[t[9]||(t[9]=e("span",{class:"me-1"}," ðŸ¤­ ",-1)),U(" "+m(r.$t("Mood tracking parameters")),1)]),b.value?k("",!0):(n(),z(y,{key:0,text:r.$t("Add a parameter"),icon:"plus",onClick:S},null,8,["text"]))]),b.value?(n(),i("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:t[4]||(t[4]=x(a=>B(),["prevent"]))},[e("div",Y,[u(Z,{errors:s(o).errors},null,8,["errors"]),u(T,{ref_key:"newMoodTrackingParameter",ref:g,modelValue:s(o).label,"onUpdate:modelValue":t[0]||(t[0]=a=>s(o).label=a),label:r.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full mb-4",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:t[1]||(t[1]=a=>b.value=!1)},null,8,["modelValue","label"]),e("p",G,m(r.$t("Choose a color")),1),e("div",J,[(n(!0),i(V,null,C(f.data.mood_tracking_parameter_colors,a=>(n(),i("div",{key:a.hex_color,class:"flex items-center"},[$(e("input",{id:a.hex_color,"onUpdate:modelValue":t[2]||(t[2]=l=>s(o).hex_color=l),value:a.hex_color,name:"name-order",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700",onClick:l=>s(o).hex_color=a.hex_color},null,8,Q),[[H,s(o).hex_color]]),e("label",{for:a.hex_color,class:"ms-2 inline-block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},[e("div",{class:p(["rounded p-4",a.hex_color])},null,2)],8,W)]))),128))])]),e("div",X,[u(P,{text:r.$t("Cancel"),class:p("me-3"),onClick:t[3]||(t[3]=a=>b.value=!1)},null,8,["text"]),u(y,{text:r.$t("Save"),state:d.value,icon:"plus",class:p("save")},null,8,["text","state"])])],32)):k("",!0),e("div",ee,[t[10]||(t[10]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 pe-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[e("p",null,m(r.$t("You can customize the criteria that let you track your mood.")),1)])]),c.value.length>0?(n(),i("div",te,[u(s(q),{list:c.value,"item-key":"id","component-data":{name:"fade"},handle:".handle",onChange:E},{item:D(({element:a})=>[v.value!==a.id?(n(),i("div",re,[e("div",oe,[t[11]||(t[11]=e("svg",{class:"handle me-2 cursor-move",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7 7H9V9H7V7Z",fill:"currentColor"}),e("path",{d:"M11 7H13V9H11V7Z",fill:"currentColor"}),e("path",{d:"M17 7H15V9H17V7Z",fill:"currentColor"}),e("path",{d:"M7 11H9V13H7V11Z",fill:"currentColor"}),e("path",{d:"M13 11H11V13H13V11Z",fill:"currentColor"}),e("path",{d:"M15 11H17V13H15V11Z",fill:"currentColor"}),e("path",{d:"M9 15H7V17H9V15Z",fill:"currentColor"}),e("path",{d:"M11 15H13V17H11V15Z",fill:"currentColor"}),e("path",{d:"M17 15H15V17H17V15Z",fill:"currentColor"})],-1)),e("div",{class:p(["me-2 inline-block h-4 w-4 rounded-full",a.hex_color])},null,2),e("span",ae,m(a.label),1)]),e("ul",le,[e("li",{class:"inline cursor-pointer text-blue-500 hover:underline",onClick:l=>j(a)},m(r.$t("Rename")),9,se),e("li",{class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:l=>N(a)},m(r.$t("Delete")),9,ne)])])):(n(),i("form",{key:1,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:x(l=>I(a),["prevent"])},[e("div",ie,[u(Z,{errors:s(o).errors},null,8,["errors"]),u(T,{ref_key:"newMoodTrackingParameter",ref:g,modelValue:s(o).label,"onUpdate:modelValue":t[5]||(t[5]=l=>s(o).label=l),label:r.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full mb-4",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:t[6]||(t[6]=l=>v.value=0)},null,8,["modelValue","label"]),e("p",ue,m(r.$t("Choose a color")),1),e("div",ce,[(n(!0),i(V,null,C(f.data.mood_tracking_parameter_colors,l=>(n(),i("div",{key:l.hex_color,class:"flex items-center"},[$(e("input",{id:l.hex_color,"onUpdate:modelValue":t[7]||(t[7]=w=>s(o).hex_color=w),value:l.hex_color,name:"name-order",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700",onClick:w=>s(o).hex_color=l.hex_color},null,8,me),[[H,s(o).hex_color]]),e("label",{for:l.hex_color,class:"ms-2 inline-block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},[e("div",{class:p(["rounded p-4",l.hex_color])},null,2)],8,pe)]))),128))])]),e("div",be,[u(P,{text:r.$t("Cancel"),class:p("me-3"),onClick:t[8]||(t[8]=x(l=>v.value=0,["prevent"]))},null,8,["text"]),u(y,{text:r.$t("Rename"),state:d.value,icon:"check",class:p("save")},null,8,["text","state"])])],40,de))]),_:1},8,["list"])])):k("",!0),c.value.length===0?(n(),i("div",ve,t[12]||(t[12]=[e("p",{class:"p-5 text-center"},"Add at least one parameter to be able to track your mood.",-1)]))):k("",!0)]))}},Ve=F(he,[["__scopeId","data-v-5778c389"]]);export{Ve as default};
