import{P as L}from"./PrettyButton-DJ97II5T.js";import{P as C}from"./PrettySpan-DbeWKi_L.js";import{T as M}from"./TextInput-DPfNN3hz.js";import{E as V}from"./Errors-DkF-M9C7.js";import{H as h,h as n,a as s,d as I,t as i,c as T,j as u,l as f,b as c,n as d,F as p,k as _,o as a,x as w,bP as S}from"./app-BmMnv7Hf.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={components:{PrettyButton:L,PrettySpan:C,TextInput:M,Errors:V},props:{layoutData:{type:Object,default:null},data:{type:Object,default:null}},data(){return{loadingState:"",createlabelModalShown:!1,editLabelModalShownId:0,localLabels:[],form:{name:"",description:"",bg_color:"",text_color:"",errors:[]}}},mounted(){this.localLabels=this.data.labels,this.form.bg_color=this.data.label_colors[0].bg_color,this.form.text_color=this.data.label_colors[0].text_color},methods:{showLabelModal(){this.form.name="",this.createlabelModalShown=!0,this.$nextTick().then(()=>{this.$refs.newLabel.focus()})},updateLabelModal(e){this.form.name=e.name,this.editLabelModalShownId=e.id,this.form.bg_color=e.bg_color,this.form.text_color=e.text_color},submit(){this.loadingState="loading",axios.post(this.data.url.label_store,this.form).then(e=>{this.flash(this.$t("The label has been created"),"success"),this.localLabels.unshift(e.data.data),this.loadingState=null,this.createlabelModalShown=!1}).catch(e=>{this.loadingState=null,this.form.errors=e.response.data})},update(e){this.loadingState="loading",axios.put(e.url.update,this.form).then(t=>{this.flash(this.$t("The label has been updated"),"success"),this.localLabels[this.localLabels.findIndex(b=>b.id===e.id)]=t.data.data,this.loadingState=null,this.editLabelModalShownId=0}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},destroy(e){confirm(this.$t("Are you sure? This action cannot be undone."))&&axios.delete(e.url.destroy).then(()=>{this.flash(this.$t("The label has been deleted"),"success");var t=this.localLabels.findIndex(b=>b.id===e.id);this.localLabels.splice(t,1)}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})}}},E={class:"mb-12"},N={class:"mb-3 mt-8 items-center justify-between sm:mt-0 sm:flex"},B={class:"mb-4 sm:mb-0"},D={class:"border-b border-gray-200 p-5 dark:border-gray-700"},U={class:"mb-2 block text-sm"},A={class:"grid grid-cols-8 gap-4"},q=["id","value","onClick"],F=["for"],K={class:"flex justify-between p-5"},O={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},R={key:0,class:"flex items-center justify-between px-5 py-2"},$={class:"flex items-center text-base"},z={class:"me-2"},H={key:0,class:"text-xs text-gray-500"},G={class:"text-sm"},J=["onClick"],Q={class:"text-blue-500 hover:underline"},W=["onClick"],X=["onSubmit"],Y={class:"border-b border-gray-200 p-5 dark:border-gray-700"},Z={class:"mb-2 block text-sm"},ee={class:"grid grid-cols-8 gap-4"},te=["id","value","onClick"],oe=["for"],se={class:"flex justify-between p-5"},re={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},le={class:"p-5 text-center"};function ae(e,t,b,ne,o,m){const g=h("pretty-button"),y=h("errors"),k=h("text-input"),x=h("pretty-span");return a(),n("div",E,[s("div",N,[s("h3",B,[t[9]||(t[9]=s("span",{class:"me-1"}," 🏷 ",-1)),I(" "+i(e.$t("All the labels used in the vault")),1)]),o.createlabelModalShown?u("",!0):(a(),T(g,{key:0,text:e.$t("Add a label"),icon:"plus",onClick:m.showLabelModal},null,8,["text","onClick"]))]),o.createlabelModalShown?(a(),n("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-900",onSubmit:t[4]||(t[4]=f(r=>m.submit(),["prevent"]))},[s("div",D,[c(y,{errors:o.form.errors},null,8,["errors"]),c(k,{ref:"newLabel",modelValue:o.form.name,"onUpdate:modelValue":t[0]||(t[0]=r=>o.form.name=r),label:e.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,class:d("mb-4"),onEscKeyPressed:t[1]||(t[1]=r=>o.createlabelModalShown=!1)},null,8,["modelValue","label"]),s("p",U,i(e.$t("Choose a color")),1),s("div",A,[(a(!0),n(p,null,_(b.data.label_colors,r=>(a(),n("div",{key:r.bg_color,class:"flex items-center"},[w(s("input",{id:r.bg_color,"onUpdate:modelValue":t[2]||(t[2]=l=>o.form.bg_color=l),value:r.bg_color,name:"name-order",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700",onClick:l=>o.form.text_color=r.text_color},null,8,q),[[S,o.form.bg_color]]),s("label",{for:r.bg_color,class:"ms-2 inline-block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},[s("div",{class:d(["rounded p-4",r.bg_color])},null,2)],8,F)]))),128))])]),s("div",K,[c(x,{text:e.$t("Cancel"),class:d("me-3"),onClick:t[3]||(t[3]=r=>o.createlabelModalShown=!1)},null,8,["text"]),c(g,{text:e.$t("Create label"),state:o.loadingState,icon:"plus",class:d("save")},null,8,["text","state"])])],32)):u("",!0),o.localLabels.length>0?(a(),n("ul",O,[(a(!0),n(p,null,_(o.localLabels,r=>(a(),n("li",{key:r.id,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800 hover:dark:bg-slate-900"},[o.editLabelModalShownId!==r.id?(a(),n("div",R,[s("span",$,[s("div",{class:d(["me-2 inline-block h-4 w-4 rounded-full",r.bg_color])},null,2),s("span",z,i(r.name),1),r.count>0?(a(),n("span",H,"("+i(e.$tChoice(":count contact|:count contacts",r.count,{count:r.count}))+")",1)):u("",!0)]),s("ul",G,[s("li",{class:"me-4 inline cursor-pointer",onClick:l=>m.updateLabelModal(r)},[s("span",Q,i(e.$t("Edit")),1)],8,J),s("li",{class:"inline cursor-pointer text-red-500 hover:text-red-900 hover:dark:text-red-100",onClick:l=>m.destroy(r)},i(e.$t("Delete")),9,W)])])):u("",!0),o.editLabelModalShownId===r.id?(a(),n("form",{key:1,class:"item-list border-b border-gray-200 bg-gray-50 hover:bg-slate-50 dark:border-gray-700 dark:bg-gray-900 dark:bg-slate-900 hover:dark:bg-slate-800 hover:dark:bg-slate-900",onSubmit:f(l=>m.update(r),["prevent"])},[s("div",Y,[c(y,{errors:o.form.errors},null,8,["errors"]),c(k,{ref_for:!0,ref:"rename",modelValue:o.form.name,"onUpdate:modelValue":t[5]||(t[5]=l=>o.form.name=l),label:e.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,class:d("mb-4"),onEscKeyPressed:t[6]||(t[6]=l=>o.editLabelModalShownId=0)},null,8,["modelValue","label"]),s("p",Z,i(e.$t("Choose a color")),1),s("div",ee,[(a(!0),n(p,null,_(b.data.label_colors,l=>(a(),n("div",{key:l.bg_color,class:"flex items-center"},[w(s("input",{id:l.bg_color,"onUpdate:modelValue":t[7]||(t[7]=v=>o.form.bg_color=v),value:l.bg_color,name:"name-order",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700",onClick:v=>o.form.text_color=l.text_color},null,8,te),[[S,o.form.bg_color]]),s("label",{for:l.bg_color,class:"ms-2 inline-block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},[s("div",{class:d(["rounded p-4",l.bg_color])},null,2)],8,oe)]))),128))])]),s("div",se,[c(x,{text:e.$t("Cancel"),class:d("me-3"),onClick:t[8]||(t[8]=f(l=>o.editLabelModalShownId=0,["prevent"]))},null,8,["text"]),c(g,{text:e.$t("Rename"),state:o.loadingState,icon:"check",class:d("save")},null,8,["text","state"])])],40,X)):u("",!0)]))),128))])):u("",!0),o.localLabels.length===0?(a(),n("div",re,[s("p",le,i(e.$t("Labels let you classify contacts using a system that matters to you.")),1)])):u("",!0)])}const he=j(P,[["render",ae],["__scopeId","data-v-216d265a"]]);export{he as default};
