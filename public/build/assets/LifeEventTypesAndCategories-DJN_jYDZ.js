import{r as v,T as J,h as m,a as l,d as j,t as c,c as Q,j as _,l as V,b as n,u as i,n as k,w as N,A as x,o as p,p as P}from"./app-BmMnv7Hf.js";import{d as B}from"./vuedraggable.umd-h0yOulbD.js";import{P as C}from"./PrettyButton-DJ97II5T.js";import{P as w}from"./PrettySpan-DbeWKi_L.js";import{T as $}from"./TextInput-DPfNN3hz.js";import{E as H}from"./Errors-DkF-M9C7.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X={class:"mb-12"},Y={class:"mb-3 mt-8 items-center justify-between sm:mt-0 sm:flex"},ee={class:"mb-4 sm:mb-0"},te={class:"border-b border-gray-200 p-5 dark:border-gray-700"},le={class:"flex justify-between p-5"},ae={key:1,class:"mb-6"},oe={key:0},se={class:"item-list mb-2 rounded-lg border border-gray-200 bg-white py-2 pe-5 ps-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-gray-900 hover:dark:bg-slate-800"},re={class:"mb-3 flex items-center justify-between"},ne={class:"me-2 flex"},de={class:"text-sm"},ie=["onClick"],ue={class:"text-blue-500 hover:underline"},ve=["onClick"],ce={class:"ms-8"},pe={class:"mb-1 text-sm text-gray-500"},fe={key:0},be={class:"item-list mb-2 rounded-lg border border-gray-200 bg-white py-2 pe-5 ps-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-gray-900 hover:dark:bg-slate-800"},me={class:"flex items-center justify-between"},ye={class:"me-2 flex"},ge={class:"text-sm"},he=["onClick"],ke={class:"text-blue-500 hover:underline"},_e=["onClick"],Ve=["onSubmit"],Ce={class:"border-b border-gray-200 p-5 dark:border-gray-700"},xe={class:"flex justify-between p-5"},we=["onClick"],$e=["onSubmit"],He={class:"border-b border-gray-200 p-5 dark:border-gray-700"},Me={class:"flex justify-between p-5"},Le={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},Ee={class:"p-5 text-center"},Ze=["onClick"],Ie=["onSubmit"],Te={class:"border-b border-gray-200 p-5 dark:border-gray-700"},Se={class:"flex justify-between p-5"},je={__name:"LifeEventTypesAndCategories",props:{data:Object},setup(U){const M=U,r=v(""),y=v(!1),f=v(!1),u=v(0),g=v(0),h=v(0),d=v(M.data.life_event_categories),L=v(null),E=v(null),Z=v(null),I=v(null),o=J({label:"",position:"",errors:[]}),A=()=>{o.label="",o.position="",y.value=!0,f.value=!1,u.value=0,g.value=0,h.value=0,x().then(()=>L.value.focus())},T=t=>{o.label="",o.position="",f.value=!0,u.value=t.id,g.value=0,h.value=0,y.value=!1,x().then(()=>Z.value.focus())},q=t=>{o.label=t.label,g.value=t.id,h.value=0,y.value=!1,f.value=!1,u.value=0,x().then(()=>E.value.focus())},K=t=>{o.label=t.label,h.value=t.id,y.value=!1,f.value=!1,g.value=0,u.value=0,x().then(()=>I.value.focus())},R=()=>{r.value="loading",axios.post(M.data.url.life_event_category_store,o).then(t=>{d.value.push(t.data.data),r.value=null,y.value=!1}).catch(t=>{r.value=null,o.errors=t.response.data})},D=t=>{r.value="loading",axios.put(t.url.update,o).then(e=>{d.value[d.value.findIndex(a=>a.id===t.id)]=e.data.data,r.value=null,g.value=0}).catch(e=>{r.value=null,o.errors=e.response.data})},z=t=>{confirm(P("Are you sure? This action cannot be undone."))&&axios.delete(t.url.destroy).then(()=>{var e=d.value.findIndex(a=>a.id===t.id);d.value.splice(e,1)}).catch(e=>{r.value=null,o.errors=e.response.data})},S=t=>{o.position=t.moved.newIndex+1,axios.post(t.moved.element.url.position,o).then(()=>{}).catch(e=>{r.value=null,o.errors=e.response.data})},O=t=>{r.value="loading",axios.post(t.url.store,o).then(e=>{var a=d.value.findIndex(s=>s.id===t.id);d.value[a].life_event_types.push(e.data.data),r.value=null,u.value=0,f.value=!1}).catch(e=>{r.value=null,o.errors=e.response.data})},F=t=>{r.value="loading",axios.put(t.url.update,o).then(e=>{var a=d.value.findIndex(b=>b.id===t.life_event_category_id),s=d.value[a].life_event_types.findIndex(b=>b.id===t.id);d.value[a].life_event_types[s]=e.data.data,r.value=null,u.value=0,h.value=0}).catch(e=>{r.value=null,o.errors=e.response.data})},G=t=>{confirm(P("Are you sure? This action cannot be undone."))&&axios.delete(t.url.destroy).then(()=>{var e=d.value.findIndex(s=>s.id===t.life_event_category_id),a=d.value[e].life_event_types.findIndex(s=>s.id===t.id);d.value[e].life_event_types.splice(a,1)}).catch(e=>{r.value=null,o.errors=e.response.data})};return(t,e)=>(p(),m("div",X,[l("div",Y,[l("h3",ee,[e[14]||(e[14]=l("span",{class:"me-1"}," 👩‍🍼 ",-1)),j(" "+c(t.$t("Life event types and categories")),1)]),y.value?_("",!0):(p(),Q(C,{key:0,text:t.$t("Add a life event category"),icon:"plus",onClick:A},null,8,["text"]))]),y.value?(p(),m("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:e[3]||(e[3]=V(a=>R(),["prevent"]))},[l("div",te,[n(H,{errors:i(o).errors},null,8,["errors"]),n($,{ref_key:"newLifeEventCategory",ref:L,modelValue:i(o).label,"onUpdate:modelValue":e[0]||(e[0]=a=>i(o).label=a),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[1]||(e[1]=a=>y.value=!1)},null,8,["modelValue","label"])]),l("div",le,[n(w,{text:t.$t("Cancel"),class:k("me-3"),onClick:e[2]||(e[2]=a=>y.value=!1)},null,8,["text"]),n(C,{text:t.$t("Save"),state:r.value,icon:"plus",class:k("save")},null,8,["text","state"])])],32)):_("",!0),d.value.length>0?(p(),m("div",ae,[n(i(B),{modelValue:d.value,"onUpdate:modelValue":e[13]||(e[13]=a=>d.value=a),"item-key":"id","component-data":{name:"fade"},handle:".handle",onChange:S},{item:N(({element:a})=>[g.value!==a.id?(p(),m("div",oe,[l("div",se,[l("div",re,[l("div",ne,[e[15]||(e[15]=l("svg",{class:"handle me-2 cursor-move",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M7 7H9V9H7V7Z",fill:"currentColor"}),l("path",{d:"M11 7H13V9H11V7Z",fill:"currentColor"}),l("path",{d:"M17 7H15V9H17V7Z",fill:"currentColor"}),l("path",{d:"M7 11H9V13H7V11Z",fill:"currentColor"}),l("path",{d:"M13 11H11V13H13V11Z",fill:"currentColor"}),l("path",{d:"M15 11H17V13H15V11Z",fill:"currentColor"}),l("path",{d:"M9 15H7V17H9V15Z",fill:"currentColor"}),l("path",{d:"M11 15H13V17H11V15Z",fill:"currentColor"}),l("path",{d:"M17 15H15V17H17V15Z",fill:"currentColor"})],-1)),l("span",null,c(a.label),1)]),l("ul",de,[l("li",{class:"inline cursor-pointer",onClick:s=>q(a)},[l("span",ue,c(t.$t("Rename")),1)],8,ie),l("li",{class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:s=>z(a)},c(t.$t("Delete")),9,ve)])]),l("div",ce,[l("p",pe,c(t.$t("Life event types:")),1),n(i(B),{modelValue:a.life_event_types,"onUpdate:modelValue":s=>a.life_event_types=s,"item-key":"id","component-data":{name:"fade"},handle:".handle",onChange:S},{item:N(({element:s})=>[h.value!==s.id?(p(),m("div",fe,[l("div",be,[l("div",me,[l("div",ye,[e[16]||(e[16]=l("svg",{class:"handle me-2 cursor-move",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M7 7H9V9H7V7Z",fill:"currentColor"}),l("path",{d:"M11 7H13V9H11V7Z",fill:"currentColor"}),l("path",{d:"M17 7H15V9H17V7Z",fill:"currentColor"}),l("path",{d:"M7 11H9V13H7V11Z",fill:"currentColor"}),l("path",{d:"M13 11H11V13H13V11Z",fill:"currentColor"}),l("path",{d:"M15 11H17V13H15V11Z",fill:"currentColor"}),l("path",{d:"M9 15H7V17H9V15Z",fill:"currentColor"}),l("path",{d:"M11 15H13V17H11V15Z",fill:"currentColor"}),l("path",{d:"M17 15H15V17H17V15Z",fill:"currentColor"})],-1)),l("span",null,c(s.label),1)]),l("ul",ge,[l("li",{class:"inline cursor-pointer",onClick:b=>K(s)},[l("span",ke,c(t.$t("Rename")),1)],8,he),l("li",{class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:b=>G(s)},c(t.$t("Delete")),9,_e)])])])])):(p(),m("form",{key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:V(b=>F(s),["prevent"])},[l("div",Ce,[n(H,{errors:i(o).errors},null,8,["errors"]),n($,{ref_key:"renameLifeEventType",ref:I,modelValue:i(o).label,"onUpdate:modelValue":e[4]||(e[4]=b=>i(o).label=b),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[5]||(e[5]=b=>h.value=0)},null,8,["modelValue","label"])]),l("div",xe,[n(w,{text:t.$t("Cancel"),class:k("me-3"),onClick:e[6]||(e[6]=b=>h.value=0)},null,8,["text"]),n(C,{text:t.$t("Rename"),state:r.value,icon:"check",class:k("save")},null,8,["text","state"])])],40,Ve))]),_:2},1032,["modelValue","onUpdate:modelValue"]),a.life_event_types.length!==0&&!f.value&&u.value!==a.id?(p(),m("span",{key:0,class:"inline cursor-pointer text-sm text-blue-500 hover:underline",onClick:s=>T(a)},c(t.$t("add a life event type")),9,we)):_("",!0),f.value&&u.value===a.id?(p(),m("form",{key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:V(s=>O(a),["prevent"])},[l("div",He,[n(H,{errors:i(o).errors},null,8,["errors"]),n($,{ref_key:"newLifeEventType",ref:Z,modelValue:i(o).label,"onUpdate:modelValue":e[7]||(e[7]=s=>i(o).label=s),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[8]||(e[8]=s=>{f.value=!1,u.value=0})},null,8,["modelValue","label"])]),l("div",Me,[n(w,{text:t.$t("Cancel"),class:k("me-3"),onClick:e[9]||(e[9]=s=>{f.value=!1,u.value=0})},null,8,["text"]),n(C,{text:t.$t("Save"),state:r.value,icon:"plus",class:k("save")},null,8,["text","state"])])],40,$e)):_("",!0),a.life_event_types.length===0&&!f.value&&u.value!==a.id?(p(),m("div",Le,[l("p",Ee,[j(c(t.$t("No life event types yet."))+" ",1),l("span",{class:"block cursor-pointer text-sm text-blue-500 hover:underline",onClick:s=>T(a)},c(t.$t("add a life event type")),9,Ze)])])):_("",!0)])])])):(p(),m("form",{key:1,class:"item-list mb-2 rounded-lg border border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:V(s=>D(a),["prevent"])},[l("div",Te,[n(H,{errors:i(o).errors},null,8,["errors"]),n($,{ref_key:"renameLifeEventCategory",ref:E,modelValue:i(o).label,"onUpdate:modelValue":e[10]||(e[10]=s=>i(o).label=s),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[11]||(e[11]=s=>g.value=0)},null,8,["modelValue","label"])]),l("div",Se,[n(w,{text:t.$t("Cancel"),class:k("me-3"),onClick:e[12]||(e[12]=V(s=>g.value=0,["prevent"]))},null,8,["text"]),n(C,{text:t.$t("Rename"),state:r.value,icon:"check",class:k("save")},null,8,["text","state"])])],40,Ie))]),_:1},8,["modelValue"])])):_("",!0)]))}},Re=W(je,[["__scopeId","data-v-8a603a56"]]);export{Re as default};
