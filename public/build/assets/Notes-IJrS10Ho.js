import{i as I,H as h,o as s,h as a,a as l,K as B,t as d,b as u,n as b,l as x,c as C,j as n,F as p,k as y,x as N,bP as S,d as g,w as E}from"./app-BmMnv7Hf.js";import{H as P}from"./HoverMenu-Rxa0RyO0.js";import{P as U}from"./PrettyButton-DJ97II5T.js";import{P as j}from"./PrettySpan-DbeWKi_L.js";import{T as Z}from"./TextInput-DPfNN3hz.js";import{T as q}from"./TextArea-Dl3jFH3I.js";import{E as A}from"./Errors-DkF-M9C7.js";import{_ as D}from"./Avatar-D1zkgQk9.js";import{_ as L}from"./Pagination-nQbjI23B.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={components:{InertiaLink:I,HoverMenu:P,PrettyButton:U,PrettySpan:j,TextInput:Z,TextArea:q,Errors:A,Avatar:D,Pagination:L},props:{data:{type:Object,default:null},paginator:{type:Object,default:null},moduleMode:{type:Boolean,default:!0}},data(){return{loadingState:"",titleFieldShown:!1,emotionFieldShown:!1,createNoteModalShown:!1,localNotes:[],editedNoteId:0,form:{title:"",body:"",emotion:"",errors:[]}}},created(){this.localNotes=this.data.notes},methods:{showCreateNoteModal(){this.form.errors=[],this.form.title="",this.form.body="",this.createNoteModalShown=!0},showEmotionField(){this.form.emotion="",this.emotionFieldShown=!0},showEditNoteModal(o){var e;this.editedNoteId=o.id,this.form.title=o.title,this.form.body=o.body,this.form.emotion=(e=o.emotion)==null?void 0:e.id},showTitleField(){this.titleFieldShown=!0,this.form.title="",this.$nextTick().then(()=>{this.$refs.newTitle.focus()})},showFullBody(o){this.localNotes[this.localNotes.findIndex(e=>e.id===o.id)].show_full_content=!0},submit(){this.loadingState="loading",axios.post(this.data.url.store,this.form).then(o=>{this.flash(this.$t("The note has been created"),"success"),this.localNotes.unshift(o.data.data),this.loadingState="",this.createNoteModalShown=!1}).catch(o=>{this.loadingState="",this.form.errors=o.response.data})},update(o){this.loadingState="loading",axios.put(o.url.update,this.form).then(e=>{this.loadingState="",this.flash(this.$t("The note has been edited"),"success"),this.localNotes[this.localNotes.findIndex(m=>m.id===o.id)]=e.data.data,this.editedNoteId=0}).catch(e=>{this.loadingState="",this.form.errors=e.response.data})},destroy(o){confirm(this.$t("Are you sure? This action cannot be undone."))&&axios.delete(o.url.destroy).then(()=>{this.flash(this.$t("The note has been deleted"),"success");var e=this.localNotes.findIndex(m=>m.id===o.id);this.localNotes.splice(e,1)}).catch(e=>{this.loadingState=null,this.form.errors=e.response.data})}}},O={class:"mb-10"},R={class:"mb-3 items-center justify-between border-b border-gray-200 pb-2 dark:border-gray-700 sm:flex"},G={class:"mb-2 sm:mb-0"},J={class:"font-semibold"},Q={class:"border-b border-gray-200 p-5 dark:border-gray-700"},W={key:1,class:"mt-2 block w-full"},X={class:"mb-2"},Y=["id","onUpdate:modelValue","value"],$=["for"],ee={class:"flex justify-between p-5"},te={key:1},oe={key:0},re={key:0,class:"border-b border-gray-200 p-3 text-xs font-semibold text-gray-600 dark:border-gray-700 dark:text-gray-400"},se={key:1,class:"p-3"},le=["onClick"],ae={key:2,class:"p-3 whitespace-pre-line"},ie={class:"flex justify-between border-t border-gray-200 px-3 py-1 text-xs text-gray-600 hover:rounded-b hover:bg-slate-50 dark:border-gray-700 dark:text-gray-400 hover:dark:bg-slate-900"},de={class:"flex items-center"},ne={key:0,class:"relative me-3 inline"},ue={class:"relative me-3 inline"},me={key:1,class:"relative me-3 inline"},ce={class:"icon-avatar relative flex"},he=["onSubmit"],be={class:"border-b border-gray-200 p-5 dark:border-gray-700"},fe={key:0,class:"mt-2 block w-full"},pe=["id","onUpdate:modelValue","value"],ye=["for"],ge={class:"flex justify-between p-5"},ve={key:0,class:"text-center"},ke={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},we=["alt"],_e={class:"px-5 pb-5 pt-2 text-center"};function xe(o,e,m,Ce,r,c){const f=h("pretty-button"),v=h("errors"),k=h("text-area"),w=h("text-input"),_=h("pretty-span"),V=h("avatar"),M=h("hover-menu"),T=h("InertiaLink"),F=h("Pagination");return s(),a("div",O,[l("div",R,[l("div",G,[e[11]||(e[11]=B('<span class="relative me-1" data-v-14b20b18><svg class="icon-sidebar relative inline h-4 w-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-14b20b18><path d="M6 6C6 5.44772 6.44772 5 7 5H17C17.5523 5 18 5.44772 18 6C18 6.55228 17.5523 7 17 7H7C6.44771 7 6 6.55228 6 6Z" fill="currentColor" data-v-14b20b18></path><path d="M6 10C6 9.44771 6.44772 9 7 9H17C17.5523 9 18 9.44771 18 10C18 10.5523 17.5523 11 17 11H7C6.44771 11 6 10.5523 6 10Z" fill="currentColor" data-v-14b20b18></path><path d="M7 13C6.44772 13 6 13.4477 6 14C6 14.5523 6.44771 15 7 15H17C17.5523 15 18 14.5523 18 14C18 13.4477 17.5523 13 17 13H7Z" fill="currentColor" data-v-14b20b18></path><path d="M6 18C6 17.4477 6.44772 17 7 17H11C11.5523 17 12 17.4477 12 18C12 18.5523 11.5523 19 11 19H7C6.44772 19 6 18.5523 6 18Z" fill="currentColor" data-v-14b20b18></path><path fill-rule="evenodd" clip-rule="evenodd" d="M2 4C2 2.34315 3.34315 1 5 1H19C20.6569 1 22 2.34315 22 4V20C22 21.6569 20.6569 23 19 23H5C3.34315 23 2 21.6569 2 20V4ZM5 3H19C19.5523 3 20 3.44771 20 4V20C20 20.5523 19.5523 21 19 21H5C4.44772 21 4 20.5523 4 20V4C4 3.44772 4.44771 3 5 3Z" fill="currentColor" data-v-14b20b18></path></svg></span>',1)),l("span",J,d(o.$t("Notes")),1)]),u(f,{text:o.$t("Add a note"),icon:"plus",class:b("w-full sm:w-fit"),onClick:c.showCreateNoteModal},null,8,["text","onClick"])]),r.createNoteModalShown?(s(),a("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-900",onSubmit:e[6]||(e[6]=x(t=>c.submit(),["prevent"]))},[l("div",Q,[u(v,{errors:r.form.errors},null,8,["errors"]),u(k,{modelValue:r.form.body,"onUpdate:modelValue":e[0]||(e[0]=t=>r.form.body=t),label:o.$t("Body"),rows:10,required:!0,maxlength:65535,markdown:!0,"textarea-class":"block w-full mb-3"},null,8,["modelValue","label"]),r.titleFieldShown?(s(),C(w,{key:0,ref:"newTitle",modelValue:r.form.title,"onUpdate:modelValue":e[1]||(e[1]=t=>r.form.title=t),label:o.$t("Title"),type:"text","input-class":"block w-full mb-3",required:!1,autocomplete:!1,maxlength:255,onEscKeyPressed:e[2]||(e[2]=t=>r.createNoteModalShown=!1)},null,8,["modelValue","label"])):n("",!0),r.emotionFieldShown?(s(),a("div",W,[l("p",X,d(o.$t("How did you feel?")),1),(s(!0),a(p,null,y(m.data.emotions,t=>(s(),a("div",{key:t.id,class:"mb-2 flex items-center"},[N(l("input",{id:t.type,"onUpdate:modelValue":i=>r.form.emotion=i,value:t.id,name:"emotion",type:"radio",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500 dark:border-gray-700 dark:bg-slate-900 dark:text-indigo-400"},null,8,Y),[[S,r.form.emotion]]),l("label",{for:t.type,class:"ms-2 block font-medium text-gray-700 dark:text-gray-300"},d(t.name),9,$)]))),128))])):n("",!0),r.titleFieldShown?n("",!0):(s(),a("span",{key:2,class:"me-2 inline-block cursor-pointer rounded-lg border bg-slate-200 px-1 py-1 text-xs hover:bg-slate-300 dark:border-gray-700 dark:bg-slate-800 hover:dark:bg-slate-700",onClick:e[3]||(e[3]=(...t)=>c.showTitleField&&c.showTitleField(...t))},d(o.$t("+ add title")),1)),r.emotionFieldShown?n("",!0):(s(),a("span",{key:3,class:"inline-block cursor-pointer rounded-lg border bg-slate-200 px-1 py-1 text-xs hover:bg-slate-300 dark:border-gray-700 dark:bg-slate-800 hover:dark:bg-slate-700",onClick:e[4]||(e[4]=(...t)=>c.showEmotionField&&c.showEmotionField(...t))},d(o.$t("+ add emotion")),1))]),l("div",ee,[u(_,{text:o.$t("Cancel"),class:b("me-3"),onClick:e[5]||(e[5]=t=>r.createNoteModalShown=!1)},null,8,["text"]),u(f,{text:o.$t("Save"),state:r.loadingState,icon:"check",class:b("save")},null,8,["text","state"])])],32)):n("",!0),r.localNotes.length>0?(s(),a("div",te,[(s(!0),a(p,null,y(r.localNotes,t=>(s(),a("div",{key:t.id,class:"mb-4 rounded border border-gray-200 last:mb-0 dark:border-gray-700 dark:bg-gray-900"},[r.editedNoteId!==t.id?(s(),a("div",oe,[t.title?(s(),a("div",re,d(t.title),1)):n("",!0),!t.show_full_content&&t.body_excerpt?(s(),a("div",se,[g(d(t.body_excerpt)+" ",1),l("span",{class:"cursor-pointer text-blue-500 hover:underline",onClick:i=>c.showFullBody(t)},d(o.$t("View all")),9,le)])):(s(),a("div",ae,d(t.body),1)),l("div",ie,[l("div",de,[t.emotion?(s(),a("div",ne,d(t.emotion.name),1)):n("",!0),l("div",ue,[e[12]||(e[12]=l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-note relative inline h-3 w-3 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),g(" "+d(t.written_at),1)]),t.author?(s(),a("div",me,[l("div",ce,[u(V,{data:t.author.avatar,class:b("relative me-1 h-3 w-3 rounded-full")},null,8,["data"]),l("span",null,d(t.author.name),1)])])):n("",!0)]),l("div",null,[u(M,{"show-edit":!0,"show-delete":!0,onEdit:i=>c.showEditNoteModal(t),onDelete:i=>c.destroy(t)},null,8,["onEdit","onDelete"])])])])):n("",!0),r.editedNoteId===t.id?(s(),a("form",{key:1,class:"bg-gray-50 dark:bg-gray-900",onSubmit:x(i=>c.update(t),["prevent"])},[l("div",be,[u(v,{errors:r.form.errors},null,8,["errors"]),u(k,{modelValue:r.form.body,"onUpdate:modelValue":e[7]||(e[7]=i=>r.form.body=i),label:o.$t("Body"),rows:10,required:!0,maxlength:65535,markdown:!0,"textarea-class":"block w-full mb-3"},null,8,["modelValue","label"]),u(w,{ref_for:!0,ref:"newTitle",modelValue:r.form.title,"onUpdate:modelValue":e[8]||(e[8]=i=>r.form.title=i),label:o.$t("Title"),type:"text","input-class":"block w-full",required:!1,autocomplete:!1,maxlength:255,onEscKeyPressed:e[9]||(e[9]=i=>r.editedNoteId=0)},null,8,["modelValue","label"]),r.form.emotion?(s(),a("div",fe,[e[13]||(e[13]=l("p",{class:"mb-2"},"How did you feel?",-1)),(s(!0),a(p,null,y(m.data.emotions,i=>(s(),a("div",{key:i.id,class:"mb-2 flex items-center"},[N(l("input",{id:i.type,"onUpdate:modelValue":H=>r.form.emotion=H,value:i.id,name:"emotion",type:"radio",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500 dark:text-indigo-400"},null,8,pe),[[S,r.form.emotion]]),l("label",{for:i.type,class:"ms-2 block font-medium text-gray-700 dark:text-gray-300"},d(i.name),9,ye)]))),128))])):n("",!0)]),l("div",ge,[u(_,{text:o.$t("Cancel"),class:b("me-3"),onClick:e[10]||(e[10]=i=>r.editedNoteId=0)},null,8,["text"]),u(f,{text:o.$t("Update"),state:r.loadingState,icon:"check",class:b("save")},null,8,["text","state"])])],40,he)):n("",!0)]))),128)),m.moduleMode?(s(),a("div",ve,[u(T,{href:m.data.url.index,class:"rounded border border-gray-200 px-3 py-1 text-sm text-blue-500 hover:border-gray-500 dark:border-gray-700"},{default:E(()=>[g(d(o.$t("View all")),1)]),_:1},8,["href"])])):n("",!0),m.moduleMode?n("",!0):(s(),C(F,{key:1,items:m.paginator},null,8,["items"]))])):n("",!0),r.localNotes.length===0?(s(),a("div",ke,[l("img",{src:"/img/contact_blank_note.svg",alt:o.$t("Notes"),class:"mx-auto mt-4 h-14 w-14"},null,8,we),l("p",_e,d(o.$t("There are no notes yet.")),1)])):n("",!0)])}const Pe=K(z,[["render",xe],["__scopeId","data-v-14b20b18"]]);export{Pe as N};
