import{r as v,T as M,c as x,w as f,o as r,a as e,t as l,b as u,d as g,u as m,i as k,j as h,h as b,n as w,l as J,F as B,k as V,A as S,p as T}from"./app-BmMnv7Hf.js";import{L as D}from"./Layout-Csq83W0y.js";import{P as _}from"./PrettyButton-DJ97II5T.js";import{P as I}from"./PrettySpan-DbeWKi_L.js";import{T as N}from"./TextInput-DPfNN3hz.js";import{E as P}from"./Errors-DkF-M9C7.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"bg-white dark:bg-gray-900 sm:mt-20 sm:border-b"},L={class:"max-w-8xl mx-auto hidden px-4 py-2 sm:px-6 md:block"},F={class:"flex items-baseline justify-between space-x-6"},O={class:"text-sm"},q={class:"me-2 inline text-gray-600 dark:text-gray-400"},z={class:"me-2 inline"},K={class:"relative me-2 inline"},U={class:"inline"},Y={class:"sm:mt-18 relative"},G={class:"mx-auto max-w-4xl px-2 py-2 sm:px-6 sm:py-6 lg:px-8"},H={class:"mb-6 flex items-center justify-between"},Q={class:"border-b border-gray-200 p-5 dark:border-gray-700"},R={class:"flex justify-between p-5"},W={key:1},X={class:"metric-list mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},Z={class:"text-sm"},ee=["onClick"],te={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},ae=["alt"],se={class:"px-5 pb-5 pt-2 text-center"},le={__name:"Index",props:{layoutData:Object,data:Object},setup(o){const p=o,n=v(p.data.journalMetrics),c=v(""),y=v(null),i=v(!1),d=M({label:""}),j=()=>{d.label="",i.value=!0,S().then(()=>y.value.focus())},$=()=>{c.value="loading",axios.post(p.data.url.store,d).then(a=>{i.value=!1,c.value="",n.value.unshift(a.data.data)}).catch(()=>{c.value=""})},C=a=>{confirm(T("Are you sure? This action cannot be undone."))&&axios.delete(a.url.destroy).then(()=>{var t=n.value.findIndex(s=>s.id===a.id);n.value.splice(t,1)}).catch(t=>{c.value=null,d.errors=t.response.data})};return(a,t)=>(r(),x(D,{"layout-data":o.layoutData,"inside-vault":!0},{default:f(()=>[e("nav",A,[e("div",L,[e("div",F,[e("ul",O,[e("li",q,l(a.$t("You are here:")),1),e("li",z,[u(m(k),{href:o.layoutData.vault.url.journals,class:"text-blue-500 hover:underline"},{default:f(()=>[g(l(a.$t("Journals")),1)]),_:1},8,["href"])]),t[4]||(t[4]=e("li",{class:"relative me-2 inline"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("li",K,[u(m(k),{href:o.data.journal.url.show,class:"text-blue-500 hover:underline"},{default:f(()=>[g(l(o.data.journal.name),1)]),_:1},8,["href"])]),t[5]||(t[5]=e("li",{class:"relative me-2 inline"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("li",U,l(a.$t("Journal metrics")),1)])])])]),e("main",Y,[e("div",G,[e("div",H,[e("h3",null,[t[6]||(t[6]=e("span",{class:"me-1"}," ðŸ“Š ",-1)),g(" "+l(a.$t("All journal metrics in :name",{name:o.data.journal.name})),1)]),i.value?h("",!0):(r(),x(_,{key:0,onClick:j,text:a.$t("Create a journal metric"),icon:"plus"},null,8,["text"]))]),i.value?(r(),b("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:t[3]||(t[3]=J(s=>$(),["prevent"]))},[e("div",Q,[u(P,{errors:m(d).errors},null,8,["errors"]),u(N,{ref_key:"newJournalMetric",ref:y,modelValue:m(d).label,"onUpdate:modelValue":t[0]||(t[0]=s=>m(d).label=s),label:a.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:t[1]||(t[1]=s=>i.value=!1)},null,8,["modelValue","label"])]),e("div",R,[u(I,{text:a.$t("Cancel"),class:w("me-3"),onClick:t[2]||(t[2]=s=>i.value=!1)},null,8,["text"]),u(_,{text:a.$t("Save"),state:c.value,icon:"plus",class:w("save")},null,8,["text","state"])])],32)):h("",!0),n.value.length!==0?(r(),b("div",W,[e("ul",X,[(r(!0),b(B,null,V(n.value,s=>(r(),b("li",{key:s.id,class:"flex items-center justify-between border-b border-gray-200 px-5 py-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},[e("span",null,l(s.label),1),e("ul",Z,[e("li",{class:"inline cursor-pointer text-red-500 hover:text-red-900",onClick:re=>C(s)},l(a.$t("Delete")),9,ee)])]))),128))])])):h("",!0),n.value.length===0?(r(),b("div",te,[e("img",{src:"/img/journal_blank_index.svg",alt:a.$t("Journal"),class:"mx-auto mt-4 h-44 w-44"},null,8,ae),e("p",se,l(a.$t("Journal metrics let you track data accross all your journal entries.")),1)])):h("",!0)])])]),_:1},8,["layout-data"]))}},be=E(le,[["__scopeId","data-v-b87f7e30"]]);export{be as default};
