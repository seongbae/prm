import{i as C,H as c,h as i,a as o,t as l,c as k,j as m,l as y,b as u,n as p,d as v,F as V,k as M,o as n,w as _}from"./app-BmMnv7Hf.js";import{P as T}from"./PrettyButton-DJ97II5T.js";import{P as $}from"./PrettySpan-DbeWKi_L.js";import{T as A}from"./TextInput-DPfNN3hz.js";import{E as I}from"./Errors-DkF-M9C7.js";import{D as q}from"./Dropdown-fLyjUirY.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as j}from"./index-BX-obcj7.js";const B={components:{InertiaLink:C,ATooltip:j,PrettyButton:T,PrettySpan:$,TextInput:A,Errors:I,Dropdown:q},props:{data:{type:Object,default:null}},data(){return{loadingState:"",localEmails:[],addEmailModalShown:!1,testEmailSentId:0,form:{content:"",label:"",minutes:"",hours:"",errors:[]}}},computed:{hours(){let t=[];for(let e=0;e<24;e++){let d=e.toString().padStart(2,"0");t.push({id:e,name:d})}return t},minutes(){let t=[];for(let e=0;e<60;e+=5){let d=e.toString().padStart(2,"0");t.push({id:e,name:d})}return t}},mounted(){this.localEmails=this.data.emails,this.form.hours="09",this.form.minutes="00"},methods:{showAddEmailModal(){this.form.label="",this.form.content="",this.addEmailModalShown=!0,this.$nextTick().then(()=>{this.$refs.content.focus()})},sendTest(t){axios.post(t.url.send_test).then(()=>{this.flash(this.$t("The test email has been sent"),"success"),this.testEmailSentId=t.id}).catch(e=>{this.form.errors=e.response.data})},toggle(t){axios.put(t.url.toggle).then(e=>{this.flash(this.$t("The channel has been updated"),"success"),this.localEmails[this.localEmails.findIndex(d=>d.id===t.id)]=e.data.data}).catch(e=>{this.form.errors=e.response.data})},store(){this.loadingState="loading",axios.post(this.data.url.store,this.form).then(t=>{this.flash(this.$t("The email has been added"),"success"),this.localEmails.unshift(t.data.data),this.loadingState=null,this.addEmailModalShown=!1}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},destroy(t){confirm(this.$t("Are you sure? This action cannot be undone."))&&axios.delete(t.url.destroy).then(()=>{this.flash(this.$t("The email address has been deleted"),"success");var e=this.localEmails.findIndex(d=>d.id===t.id);this.localEmails.splice(e,1)}).catch(e=>{this.loadingState=null,this.form.errors=e.response.data})}}},P={class:"mb-8"},L={class:"mb-3 flex items-center justify-between"},N={class:"dark:text-gray-200"},U={class:"border-b border-gray-200 p-5 dark:border-gray-700"},z={class:"mb-2 block text-sm"},F={class:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},K={class:"me-2"},W={class:"border-b border-gray-200 p-5 dark:border-gray-700"},G={class:"flex"},H={class:"flex justify-between p-5"},O={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},Y={class:"flex items-center"},J={class:"mb-0 block"},Q={class:"bulleted-list me-2 text-sm text-gray-500"},R={key:0,class:"me-1 inline"},X={class:"inline"},Z={key:0,class:"text-sm"},ee=["onClick"],te=["onClick"],se=["onClick"],oe={key:3,class:"me-4 inline"},re={class:"me-4 inline cursor-pointer text-blue-500 hover:underline"},le=["onClick"],ne={key:1,class:"text-sm"},ie={class:"me-4 inline"},ae=["onClick"],de={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},me={class:"p-5 text-center"};function ue(t,e,d,ce,r,a){const f=c("pretty-button"),w=c("errors"),b=c("text-input"),g=c("Dropdown"),x=c("pretty-span"),E=c("a-tooltip"),S=c("InertiaLink");return n(),i("div",P,[o("div",L,[o("span",N,l(t.$t("You haven’t received a notification in this channel yet.")),1),r.addEmailModalShown?m("",!0):(n(),k(f,{key:0,text:t.$t("Add an email address"),icon:"plus",onClick:a.showAddEmailModal},null,8,["text","onClick"]))]),r.addEmailModalShown?(n(),i("form",{key:0,class:"item-list mb-6 rounded-lg border border-b border-gray-200 bg-gray-50 hover:bg-slate-50 dark:border-gray-700 dark:bg-gray-900 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:e[7]||(e[7]=y(s=>a.store(),["prevent"]))},[o("div",U,[u(w,{errors:r.form.errors},null,8,["errors"]),u(b,{ref:"content",modelValue:r.form.content,"onUpdate:modelValue":e[0]||(e[0]=s=>r.form.content=s),label:t.$t("Which email address should we send the notification to?"),type:"email",autofocus:!0,"input-class":"block w-full",required:!0,class:p("mb-4"),autocomplete:!1,maxlength:255,onEscKeyPressed:e[1]||(e[1]=s=>r.addEmailModalShown=!1)},null,8,["modelValue","label"]),u(b,{modelValue:r.form.label,"onUpdate:modelValue":e[2]||(e[2]=s=>r.form.label=s),label:t.$t("Give this email address a name"),type:"text",autofocus:!0,"input-class":"block w-full",class:p("mb-4"),required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[3]||(e[3]=s=>r.addEmailModalShown=!1)},null,8,["modelValue","label"]),o("p",z,l(t.$t("At which time should we send the notification, when the reminder occurs?")),1),o("div",F,[o("span",K,l(t.$t("At")),1),u(g,{modelValue:r.form.hours,"onUpdate:modelValue":e[4]||(e[4]=s=>r.form.hours=s),"dropdown-class":"me-1",required:t.required,data:a.hours},null,8,["modelValue","required","data"]),e[8]||(e[8]=o("span",{class:"me-2"},":",-1)),u(g,{modelValue:r.form.minutes,"onUpdate:modelValue":e[5]||(e[5]=s=>r.form.minutes=s),"dropdown-class":"me-1",required:t.required,data:a.minutes},null,8,["modelValue","required","data"])])]),o("div",W,[o("p",G,[e[9]||(e[9]=o("span",{class:"me-2"},"⚠️",-1)),v(" "+l(t.$t("We’ll send an email to this email address that you will need to confirm before we can send notifications to this address.")),1)])]),o("div",H,[u(x,{text:t.$t("Cancel"),class:p("me-3"),onClick:e[6]||(e[6]=y(s=>r.addEmailModalShown=!1,["prevent"]))},null,8,["text"]),u(f,{text:t.$t("Add"),state:r.loadingState,icon:"plus",class:p("save")},null,8,["text","state"])])],32)):m("",!0),r.localEmails.length>0?(n(),i("ul",O,[(n(!0),i(V,null,M(r.localEmails,s=>(n(),i("li",{key:s.id,class:"item-list flex items-center justify-between border-b border-gray-200 px-5 py-2 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},[o("div",Y,[s.verified_at?(n(),k(E,{key:0,placement:"topLeft",title:t.$t("Verified"),"arrow-point-at-center":""},{default:_(()=>e[10]||(e[10]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"me-2 inline h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})],-1)])),_:1},8,["title"])):m("",!0),o("div",null,[o("span",J,l(s.content),1),o("ul",Q,[s.label?(n(),i("li",R,l(s.label),1)):m("",!0),o("li",X,l(t.$t("Sent at :time",{time:s.preferred_time})),1)])])]),s.verified_at?(n(),i("ul",Z,[s.active?(n(),i("li",{key:0,class:"me-4 inline cursor-pointer text-blue-500 hover:underline",onClick:h=>a.toggle(s)},l(t.$t("Deactivate")),9,ee)):m("",!0),s.active?m("",!0):(n(),i("li",{key:1,class:"me-4 inline cursor-pointer text-blue-500 hover:underline",onClick:h=>a.toggle(s)},l(t.$t("Activate")),9,te)),r.testEmailSentId!==s.id?(n(),i("li",{key:2,class:"me-4 inline cursor-pointer text-blue-500 hover:underline",onClick:h=>a.sendTest(s)},l(t.$t("Send test")),9,se)):m("",!0),r.testEmailSentId===s.id?(n(),i("li",oe,l(t.$t("Test email sent!")),1)):m("",!0),o("li",re,[u(S,{href:s.url.logs,class:"text-blue-500 hover:underline"},{default:_(()=>[v(l(t.$t("View log")),1)]),_:2},1032,["href"])]),o("li",{class:"inline cursor-pointer text-red-500 hover:text-red-900",onClick:h=>a.destroy(s)},l(t.$t("Delete")),9,le)])):(n(),i("ul",ne,[o("li",ie,l(t.$t("Verification email sent")),1),o("li",{class:"inline cursor-pointer text-red-500 hover:text-red-900",onClick:h=>a.destroy(s)},l(t.$t("Delete")),9,ae)]))]))),128))])):(n(),i("div",de,[o("p",me,l(t.$t("Add an email to be notified when a reminder occurs.")),1)]))])}const _e=D(B,[["render",ue],["__scopeId","data-v-5b3986ad"]]);export{_e as default};
