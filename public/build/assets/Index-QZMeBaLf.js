import{i as I,H as f,c as _,w as x,o as i,a as t,t as u,b as n,d as w,j as m,h,n as c,l as b,F as T,k as S}from"./app-BmMnv7Hf.js";import{L as V}from"./Layout-Csq83W0y.js";import{P as $}from"./PrettyButton-DJ97II5T.js";import{P as N}from"./PrettySpan-DbeWKi_L.js";import{T as j}from"./TextInput-DPfNN3hz.js";import{E as P}from"./Errors-DkF-M9C7.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={components:{InertiaLink:I,Layout:V,PrettyButton:$,PrettySpan:N,TextInput:j,Errors:P},props:{layoutData:{type:Object,default:null},data:{type:Object,default:null}},data(){return{loadingState:"",createCallReasonTypeModalShown:!1,renameCallReasonTypeModalShownId:0,createReasonModalId:0,renameReasonModalId:0,localCallReasonTypes:[],form:{callReasonTypeName:"",label:"",errors:[]}}},mounted(){this.localCallReasonTypes=this.data.call_reason_types},methods:{showCallReasonTypeModal(){this.form.callReasonTypeName="",this.createCallReasonTypeModalShown=!0,this.renameCallReasonTypeModalShownId=0,this.$nextTick().then(()=>{this.$refs.newCallReasonType.focus()})},renameCallReasonTypeModal(s){this.form.callReasonTypeName=s.label,this.renameCallReasonTypeModalShownId=s.id,this.createCallReasonTypeModalShown=!1,this.$nextTick().then(()=>{this.$refs.renameCallReasonType[0].focus()})},showReasonModal(s){this.createReasonModalId=s.id,this.form.label="",this.$nextTick().then(()=>{this.$refs.newReason[0].focus()})},renameReasonModal(s){this.form.label=s.label,this.renameReasonModalId=s.id,this.$nextTick().then(()=>{this.$refs.rename[0].focus()})},submitCallReasonType(){this.loadingState="loading",axios.post(this.data.url.call_reason_type_store,this.form).then(s=>{this.flash(this.$t("The call reason type has been created"),"success"),this.localCallReasonTypes.unshift(s.data.data),this.loadingState=null,this.createCallReasonTypeModalShown=!1}).catch(s=>{this.loadingState=null,this.form.errors=s.response.data})},updateCallReasonType(s){this.loadingState="loading",axios.put(s.url.update,this.form).then(e=>{this.flash(this.$t("The call reason type has been updated"),"success"),this.localCallReasonTypes[this.localCallReasonTypes.findIndex(r=>r.id===s.id)]=e.data.data,this.loadingState=null,this.renameCallReasonTypeModalShownId=0}).catch(e=>{this.loadingState=null,this.form.errors=e.response.data})},destroyCallReasonType(s){confirm(this.$t("Are you sure? This will delete all the call reasons of this type for all the contacts that were using it."))&&axios.delete(s.url.destroy).then(()=>{this.flash(this.$t("The call reason type has been deleted"),"success");var e=this.localCallReasonTypes.findIndex(r=>r.id===s.id);this.localCallReasonTypes.splice(e,1)}).catch(e=>{this.loadingState=null,this.form.errors=e.response.data})},storeReason(s){this.loadingState="loading",axios.post(s.url.store,this.form).then(e=>{this.flash(this.$t("The call reason has been created"),"success"),this.loadingState=null,this.createReasonModalId=0;var r=this.localCallReasonTypes.findIndex(p=>p.id===s.id);this.localCallReasonTypes[r].reasons.unshift(e.data.data)}).catch(e=>{this.loadingState=null,this.form.errors=e.response.data})},updateReason(s,e){this.loadingState="loading",axios.put(e.url.update,this.form).then(r=>{this.flash(this.$t("The call reason has been updated"),"success"),this.loadingState=null,this.renameReasonModalId=0;var p=this.localCallReasonTypes.findIndex(d=>d.id===s.id),l=this.localCallReasonTypes[p].reasons.findIndex(d=>d.id===e.id);this.localCallReasonTypes[p].reasons[l]=r.data.data}).catch(r=>{this.loadingState=null,this.form.errors=r.response.data})},destroyReason(s,e){confirm(this.$t("Are you sure? This will delete all the relationships of this type for all the contacts that were using it."))&&axios.delete(e.url.destroy).then(()=>{this.flash(this.$t("The call reason has been deleted"),"success");var r=this.localCallReasonTypes.findIndex(l=>l.id===s.id),p=this.localCallReasonTypes[r].reasons.findIndex(l=>l.id===e.id);this.localCallReasonTypes[r].reasons.splice(p,1)}).catch(r=>{this.loadingState=null,this.form.errors=r.response.data})}}},L={class:"bg-white dark:bg-gray-900 sm:border-b"},D={class:"max-w-8xl mx-auto hidden px-4 py-2 sm:px-6 md:block"},q={class:"flex items-baseline justify-between space-x-6"},z={class:"text-sm"},A={class:"me-2 inline text-gray-600 dark:text-gray-400"},K={class:"me-2 inline"},U={class:"me-2 inline"},F={class:"inline"},O={class:"relative sm:mt-20"},H={class:"mx-auto max-w-3xl px-2 py-2 sm:px-6 sm:py-6 lg:px-8"},W={class:"mb-6 mt-8 items-center justify-between sm:mt-0 sm:flex"},Y={class:"mb-4 sm:mb-0"},G={class:"mb-6 flex rounded border bg-slate-50 px-3 py-2 text-sm dark:border-gray-700 dark:bg-slate-900"},J={class:"mb-2"},Q={class:"border-b border-gray-200 p-5 dark:border-gray-700"},X={class:"flex justify-between p-5"},Z={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},ee={key:0,class:"item-list flex items-center justify-between border-b border-gray-200 px-5 py-2 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},se={class:"text-base font-semibold"},te={class:"text-sm"},le=["onClick"],oe={class:"text-blue-500 hover:underline"},ae=["onClick"],re=["onSubmit"],ne={class:"border-b border-gray-200 p-5 dark:border-gray-700"},ie={class:"flex justify-between p-5"},de={key:0,class:"flex items-center justify-between px-5 py-2 ps-6"},ue={class:"text-sm"},he=["onClick"],ce={class:"text-blue-500 hover:underline"},me=["onClick"],pe=["onSubmit"],be={class:"border-b border-gray-200 p-5 dark:border-gray-700"},ye={class:"flex justify-between p-5"},fe={key:2,class:"item-list border-b border-gray-200 px-5 py-2 ps-6 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},ge=["onClick"],ke=["onSubmit"],ve={class:"border-b border-gray-200 p-5 dark:border-gray-700"},Ce={class:"flex justify-between p-5"},xe={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},we={class:"p-5 text-center"};function Re(s,e,r,p,l,d){const R=f("InertiaLink"),g=f("pretty-button"),k=f("errors"),v=f("text-input"),C=f("pretty-span"),M=f("layout");return i(),_(M,{"layout-data":r.layoutData},{default:x(()=>[t("nav",L,[t("div",D,[t("div",q,[t("ul",z,[t("li",A,u(s.$t("You are here:")),1),t("li",K,[n(R,{href:r.data.url.settings,class:"text-blue-500 hover:underline"},{default:x(()=>[w(u(s.$t("Settings")),1)]),_:1},8,["href"])]),e[13]||(e[13]=t("li",{class:"relative me-2 inline"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),t("li",U,[n(R,{href:r.data.url.personalize,class:"text-blue-500 hover:underline"},{default:x(()=>[w(u(s.$t("Personalize your account")),1)]),_:1},8,["href"])]),e[14]||(e[14]=t("li",{class:"relative me-2 inline"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),t("li",F,u(s.$t("Call reasons")),1)])])])]),t("main",O,[t("div",H,[t("div",W,[t("h3",Y,[e[15]||(e[15]=t("span",{class:"me-1"}," ðŸ“² ",-1)),w(" "+u(s.$t("All the call reasons")),1)]),l.createCallReasonTypeModalShown?m("",!0):(i(),_(g,{key:0,text:s.$t("add a call reason type"),icon:"plus",onClick:d.showCallReasonTypeModal},null,8,["text","onClick"]))]),t("div",G,[e[16]||(e[16]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 pe-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("div",null,[t("p",J,u(s.$t("Call reasons let you indicate the reason of calls you make to your contacts.")),1)])]),l.createCallReasonTypeModalShown?(i(),h("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:e[3]||(e[3]=b(o=>d.submitCallReasonType(),["prevent"]))},[t("div",Q,[n(k,{errors:l.form.errors},null,8,["errors"]),n(v,{ref:"newCallReasonType",modelValue:l.form.callReasonTypeName,"onUpdate:modelValue":e[0]||(e[0]=o=>l.form.callReasonTypeName=o),label:s.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[1]||(e[1]=o=>l.createCallReasonTypeModalShown=!1)},null,8,["modelValue","label"])]),t("div",X,[n(C,{text:s.$t("Cancel"),class:c("me-3"),onClick:e[2]||(e[2]=o=>l.createCallReasonTypeModalShown=!1)},null,8,["text"]),n(g,{text:s.$t("Save"),state:l.loadingState,icon:"plus",class:c("save")},null,8,["text","state"])])],32)):m("",!0),l.localCallReasonTypes.length>0?(i(),h("ul",Z,[(i(!0),h(T,null,S(l.localCallReasonTypes,o=>(i(),h("li",{key:o.id},[l.renameCallReasonTypeModalShownId!==o.id?(i(),h("div",ee,[t("span",se,u(o.label),1),t("ul",te,[t("li",{class:"inline cursor-pointer",onClick:a=>d.renameCallReasonTypeModal(o)},[t("span",oe,u(s.$t("Rename")),1)],8,le),t("li",{class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:a=>d.destroyCallReasonType(o)},u(s.$t("Delete")),9,ae)])])):m("",!0),l.renameCallReasonTypeModalShownId===o.id?(i(),h("form",{key:1,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:b(a=>d.updateCallReasonType(o),["prevent"])},[t("div",ne,[n(k,{errors:l.form.errors},null,8,["errors"]),n(v,{ref_for:!0,ref:"renameCallReasonType",modelValue:l.form.callReasonTypeName,"onUpdate:modelValue":e[4]||(e[4]=a=>l.form.callReasonTypeName=a),label:s.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[5]||(e[5]=a=>l.renameCallReasonTypeModalShownId=0)},null,8,["modelValue","label"])]),t("div",ie,[n(C,{text:s.$t("Cancel"),class:c("me-3"),onClick:e[6]||(e[6]=b(a=>l.renameCallReasonTypeModalShownId=0,["prevent"]))},null,8,["text"]),n(g,{text:s.$t("Rename"),state:l.loadingState,icon:"check",class:c("save")},null,8,["text","state"])])],40,re)):m("",!0),(i(!0),h(T,null,S(o.reasons,a=>(i(),h("div",{key:a.id,class:"border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},[l.renameReasonModalId!==a.id?(i(),h("div",de,[t("span",null,u(a.label),1),t("ul",ue,[t("li",{class:"inline cursor-pointer",onClick:y=>d.renameReasonModal(a)},[t("span",ce,u(s.$t("Rename")),1)],8,he),t("li",{class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:y=>d.destroyReason(o,a)},u(s.$t("Delete")),9,me)])])):(i(),h("form",{key:1,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:b(y=>d.updateReason(o,a),["prevent"])},[t("div",be,[n(k,{errors:l.form.errors},null,8,["errors"]),n(v,{ref_for:!0,ref:"rename",modelValue:l.form.label,"onUpdate:modelValue":e[7]||(e[7]=y=>l.form.label=y),label:s.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,class:c("mb-4"),placeholder:s.$t("Wish good day"),autocomplete:!1,maxlength:255,onEscKeyPressed:e[8]||(e[8]=y=>l.renameReasonModalId=0)},null,8,["modelValue","label","placeholder"])]),t("div",ye,[n(C,{text:s.$t("Cancel"),class:c("me-3"),onClick:e[9]||(e[9]=b(y=>l.renameReasonModalId=0,["prevent"]))},null,8,["text"]),n(g,{text:s.$t("Rename"),state:l.loadingState,icon:"check",class:c("save")},null,8,["text","state"])])],40,pe))]))),128)),l.createReasonModalId!==o.id?(i(),h("div",fe,[t("span",{class:"cursor-pointer text-sm text-blue-500 hover:underline",onClick:a=>d.showReasonModal(o)},u(s.$t("add a reason")),9,ge)])):m("",!0),l.createReasonModalId===o.id?(i(),h("form",{key:3,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:b(a=>d.storeReason(o),["prevent"])},[t("div",ve,[n(k,{errors:l.form.errors},null,8,["errors"]),n(v,{ref_for:!0,ref:"newReason",modelValue:l.form.label,"onUpdate:modelValue":e[10]||(e[10]=a=>l.form.label=a),label:s.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[11]||(e[11]=a=>l.createReasonModalId=0)},null,8,["modelValue","label"])]),t("div",Ce,[n(C,{text:s.$t("Cancel"),class:c("me-3"),onClick:e[12]||(e[12]=b(a=>l.createReasonModalId=0,["prevent"]))},null,8,["text"]),n(g,{text:s.$t("Add"),state:l.loadingState,icon:"plus",class:c("save")},null,8,["text","state"])])],40,ke)):m("",!0)]))),128))])):m("",!0),l.localCallReasonTypes.length===0?(i(),h("div",xe,[t("p",we,u(s.$t("Call reasons let you indicate the reason of calls you make to your contacts.")),1)])):m("",!0)])])]),_:1},8,["layout-data"])}const Ne=B(E,[["render",Re],["__scopeId","data-v-c20e8de9"]]);export{Ne as default};
