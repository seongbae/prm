import{r as v,T,h as p,a as l,d as j,t as b,c as B,j as h,l as g,b as o,u as d,n as y,w as I,A as V,o as i}from"./app-BmMnv7Hf.js";import{P as k}from"./PrettyButton-DJ97II5T.js";import{P as _}from"./PrettySpan-DbeWKi_L.js";import{T as w}from"./TextInput-DPfNN3hz.js";import{E as C}from"./Errors-DkF-M9C7.js";import{d as N}from"./vuedraggable.umd-h0yOulbD.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"mb-12"},A={class:"mb-3 mt-8 items-center justify-between sm:mt-0 sm:flex"},D={class:"mb-4 sm:mb-0"},F={class:"border-b border-gray-200 p-5 dark:border-gray-700"},K={class:"flex justify-between p-5"},R={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},U={key:0,class:"item-list flex items-center justify-between border-b border-gray-200 py-2 pe-5 ps-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},z={class:"me-2 flex"},O={class:"text-sm"},G=["onClick"],J={class:"text-blue-500 hover:underline"},L=["onClick"],W=["onSubmit"],X={class:"border-b border-gray-200 p-5 dark:border-gray-700"},Y={class:"flex justify-between p-5"},ee={key:2},te={class:"p-5 text-center"},le={__name:"QuickFactTemplate",props:{data:Object},setup($){const x=$,s=v(!1),u=v(!1),m=v(0),n=v(x.data.quick_fact_templates),f=v(null),a=T({label:"",position:"",errors:[]}),H=()=>{a.label="",a.position="",u.value=!0,V().then(()=>f.value.focus())},E=t=>{a.label=t.label,m.value=t.id,V().then(()=>f.value.focus())},M=()=>{s.value="loading",axios.post(x.data.url.quick_fact_templates_store,a).then(t=>{n.value.unshift(t.data.data),s.value=null,u.value=!1}).catch(t=>{s.value=null,a.errors=t.response.data})},Z=t=>{s.value="loading",axios.put(t.url.update,a).then(e=>{n.value[n.value.findIndex(r=>r.id===t.id)]=e.data.data,s.value=null,m.value=0}).catch(e=>{s.value=null,a.errors=e.response.data})},S=t=>{axios.delete(t.url.destroy).then(()=>{var e=n.value.findIndex(r=>r.id===t.id);n.value.splice(e,1)}).catch(e=>{s.value=null,a.errors=e.response.data})},P=t=>{a.position=t.moved.newIndex+1,axios.put(t.moved.element.url.position,a).catch(e=>{s.value=null,a.errors=e.response.data})};return(t,e)=>(i(),p("div",Q,[l("div",A,[l("h3",D,[e[7]||(e[7]=l("span",{class:"me-1"}," ðŸ§‘â€ðŸ­ ",-1)),j(" "+b(t.$t("Quick facts template")),1)]),u.value?h("",!0):(i(),B(k,{key:0,text:t.$t("Add an entry"),icon:"plus",onClick:H},null,8,["text"]))]),u.value?(i(),p("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:e[3]||(e[3]=g(r=>M(),["prevent"]))},[l("div",F,[o(C,{errors:d(a).errors},null,8,["errors"]),o(w,{ref_key:"newEntry",ref:f,modelValue:d(a).label,"onUpdate:modelValue":e[0]||(e[0]=r=>d(a).label=r),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[1]||(e[1]=r=>u.value=!1)},null,8,["modelValue","label"])]),l("div",K,[o(_,{text:t.$t("Cancel"),class:y("me-3"),onClick:e[2]||(e[2]=r=>u.value=!1)},null,8,["text"]),o(k,{text:t.$t("Save"),state:s.value,icon:"plus",class:y("save")},null,8,["text","state"])])],32)):h("",!0),n.value.length>0?(i(),p("div",R,[o(d(N),{list:n.value,"item-key":"id","component-data":{name:"fade"},handle:".handle",onChange:P},{item:I(({element:r})=>[m.value!==r.id?(i(),p("div",U,[l("div",z,[e[8]||(e[8]=l("svg",{class:"handle me-2 cursor-move",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M7 7H9V9H7V7Z",fill:"currentColor"}),l("path",{d:"M11 7H13V9H11V7Z",fill:"currentColor"}),l("path",{d:"M17 7H15V9H17V7Z",fill:"currentColor"}),l("path",{d:"M7 11H9V13H7V11Z",fill:"currentColor"}),l("path",{d:"M13 11H11V13H13V11Z",fill:"currentColor"}),l("path",{d:"M15 11H17V13H15V11Z",fill:"currentColor"}),l("path",{d:"M9 15H7V17H9V15Z",fill:"currentColor"}),l("path",{d:"M11 15H13V17H11V15Z",fill:"currentColor"}),l("path",{d:"M17 15H15V17H17V15Z",fill:"currentColor"})],-1)),l("span",null,b(r.label),1)]),l("ul",O,[l("li",{class:"inline cursor-pointer",onClick:c=>E(r)},[l("span",J,b(t.$t("Rename")),1)],8,G),l("li",{class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:c=>S(r)},b(t.$t("Delete")),9,L)])])):(i(),p("form",{key:1,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:g(c=>Z(r),["prevent"])},[l("div",X,[o(C,{errors:d(a).errors},null,8,["errors"]),o(w,{ref_key:"newEntry",ref:f,modelValue:d(a).label,"onUpdate:modelValue":e[4]||(e[4]=c=>d(a).label=c),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[5]||(e[5]=c=>m.value=0)},null,8,["modelValue","label"])]),l("div",Y,[o(_,{text:t.$t("Cancel"),class:y("me-3"),onClick:e[6]||(e[6]=g(c=>m.value=0,["prevent"]))},null,8,["text"]),o(k,{text:t.$t("Rename"),state:s.value,icon:"check",class:y("save")},null,8,["text","state"])])],40,W))]),_:1},8,["list"])])):h("",!0),n.value.length===0?(i(),p("div",ee,[l("p",te,b(t.$t("Quick facts let you document interesting facts about a contact.")),1)])):h("",!0)]))}},ue=q(le,[["__scopeId","data-v-72883a93"]]);export{ue as default};
