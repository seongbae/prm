import{i as V,H as n,c as _,w as f,o as d,a as e,t as r,b as i,d as g,j as m,h,n as p,l as y}from"./app-BmMnv7Hf.js";import{L as C}from"./Layout-Csq83W0y.js";import{P as S}from"./PrettyButton-DJ97II5T.js";import{P as M}from"./PrettySpan-DbeWKi_L.js";import{T as H}from"./TextInput-DPfNN3hz.js";import{E as I}from"./Errors-DkF-M9C7.js";import{d as j}from"./vuedraggable.umd-h0yOulbD.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={components:{InertiaLink:V,Layout:C,PrettyButton:S,PrettySpan:M,TextInput:H,Errors:I,draggable:j},props:{layoutData:{type:Object,default:null},data:{type:Object,default:null}},data(){return{loadingState:"",createGiftOccasionModalShown:!1,editGiftOccasionId:0,localGiftOccasions:[],form:{label:"",position:"",errors:[]}}},mounted(){this.localGiftOccasions=this.data.gift_occasions},methods:{showGiftOccasionModal(){this.form.label="",this.form.position="",this.createGiftOccasionModalShown=!0,this.editGiftOccasionId=0,this.$nextTick().then(()=>this.$refs.newGiftOccasion.focus())},renameGiftOccasionModal(s){this.form.label=s.label,this.editGiftOccasionId=s.id,this.createGiftOccasionModalShown=!1,this.$nextTick().then(()=>this.$refs.rename.focus())},submit(){this.loadingState="loading",axios.post(this.data.url.store,this.form).then(s=>{this.flash(this.$t("The gift occasion has been created"),"success"),this.localGiftOccasions.unshift(s.data.data),this.loadingState=null,this.createGiftOccasionModalShown=!1}).catch(s=>{this.loadingState=null,this.form.errors=s.response.data})},update(s){this.loadingState="loading",axios.put(s.url.update,this.form).then(t=>{this.flash(this.$t("The gift occasion has been updated"),"success"),this.localGiftOccasions[this.localGiftOccasions.findIndex(l=>l.id===s.id)]=t.data.data,this.loadingState=null,this.editGiftOccasionId=0}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},destroy(s){confirm(this.$t("Are you sure? This action cannot be undone."))&&axios.delete(s.url.destroy).then(()=>{this.flash(this.$t("The gift occasion has been deleted"),"success");var t=this.localGiftOccasions.findIndex(l=>l.id===s.id);this.localGiftOccasions.splice(t,1)}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},updatePosition(s){this.form.position=s.moved.newIndex+1,axios.post(s.moved.element.url.position,this.form).then(()=>{this.flash(this.$t("The position has been saved"),"success")}).catch(t=>{this.loadingState=null,this.errors=t.response.data})}}},Z={class:"bg-white dark:bg-gray-900 sm:border-b"},$={class:"max-w-8xl mx-auto hidden px-4 py-2 sm:px-6 md:block"},B={class:"flex items-baseline justify-between space-x-6"},N={class:"text-sm"},E={class:"me-2 inline text-gray-600 dark:text-gray-400"},L={class:"me-2 inline"},z={class:"me-2 inline"},D={class:"inline"},A={class:"relative sm:mt-20"},q={class:"mx-auto max-w-3xl px-2 py-2 sm:px-6 sm:py-6 lg:px-8"},K={class:"mb-6 mt-8 items-center justify-between sm:mt-0 sm:flex"},R={class:"mb-4 sm:mb-0"},U={class:"border-b border-gray-200 p-5 dark:border-gray-700"},Y={class:"flex justify-between p-5"},F={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},J={key:0,class:"item-list flex items-center justify-between border-b border-gray-200 py-2 pe-5 ps-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},Q={class:"me-2 flex"},W={class:"text-sm"},X=["onClick"],ee={class:"text-blue-500 hover:underline"},te=["onClick"],se=["onSubmit"],oe={class:"border-b border-gray-200 p-5 dark:border-gray-700"},ie={class:"flex justify-between p-5"},ae={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},re={class:"p-5 text-center"};function le(s,t,l,ne,o,c){const v=n("InertiaLink"),b=n("pretty-button"),k=n("errors"),x=n("text-input"),w=n("pretty-span"),G=n("draggable"),O=n("layout");return d(),_(O,{"layout-data":l.layoutData},{default:f(()=>[e("nav",Z,[e("div",$,[e("div",B,[e("ul",N,[e("li",E,r(s.$t("You are here:")),1),e("li",L,[i(v,{href:l.data.url.settings,class:"text-blue-500 hover:underline"},{default:f(()=>[g(r(s.$t("Settings")),1)]),_:1},8,["href"])]),t[7]||(t[7]=e("li",{class:"relative me-2 inline"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("li",z,[i(v,{href:l.data.url.personalize,class:"text-blue-500 hover:underline"},{default:f(()=>[g(r(s.$t("Personalize your account")),1)]),_:1},8,["href"])]),t[8]||(t[8]=e("li",{class:"relative me-2 inline"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("li",D,r(s.$t("Gift occasions")),1)])])])]),e("main",A,[e("div",q,[e("div",K,[e("h3",R,[t[9]||(t[9]=e("span",{class:"me-1"}," 🎁 ",-1)),g(" "+r(s.$t("All the gift occasions")),1)]),o.createGiftOccasionModalShown?m("",!0):(d(),_(b,{key:0,text:s.$t("Add a gift occasion"),icon:"plus",onClick:c.showGiftOccasionModal},null,8,["text","onClick"]))]),o.createGiftOccasionModalShown?(d(),h("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:t[3]||(t[3]=y(a=>c.submit(),["prevent"]))},[e("div",U,[i(k,{errors:o.form.errors},null,8,["errors"]),i(x,{ref:"newGiftOccasion",modelValue:o.form.label,"onUpdate:modelValue":t[0]||(t[0]=a=>o.form.label=a),label:s.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:t[1]||(t[1]=a=>o.createGiftOccasionModalShown=!1)},null,8,["modelValue","label"])]),e("div",Y,[i(w,{text:s.$t("Cancel"),class:p("me-3"),onClick:t[2]||(t[2]=a=>o.createGiftOccasionModalShown=!1)},null,8,["text"]),i(b,{text:s.$t("Save"),state:o.loadingState,icon:"plus",class:p("save")},null,8,["text","state"])])],32)):m("",!0),o.localGiftOccasions.length>0?(d(),h("div",F,[i(G,{list:o.localGiftOccasions,"item-key":"id","component-data":{name:"fade"},handle:".handle",onChange:c.updatePosition},{item:f(({element:a})=>[o.editGiftOccasionId!==a.id?(d(),h("div",J,[e("div",Q,[t[10]||(t[10]=e("svg",{class:"handle me-2 cursor-move",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7 7H9V9H7V7Z",fill:"currentColor"}),e("path",{d:"M11 7H13V9H11V7Z",fill:"currentColor"}),e("path",{d:"M17 7H15V9H17V7Z",fill:"currentColor"}),e("path",{d:"M7 11H9V13H7V11Z",fill:"currentColor"}),e("path",{d:"M13 11H11V13H13V11Z",fill:"currentColor"}),e("path",{d:"M15 11H17V13H15V11Z",fill:"currentColor"}),e("path",{d:"M9 15H7V17H9V15Z",fill:"currentColor"}),e("path",{d:"M11 15H13V17H11V15Z",fill:"currentColor"}),e("path",{d:"M17 15H15V17H17V15Z",fill:"currentColor"})],-1)),e("span",null,r(a.label),1)]),e("ul",W,[e("li",{class:"inline cursor-pointer",onClick:u=>c.renameGiftOccasionModal(a)},[e("span",ee,r(s.$t("Rename")),1)],8,X),e("li",{class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:u=>c.destroy(a)},r(s.$t("Delete")),9,te)])])):(d(),h("form",{key:1,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:y(u=>c.update(a),["prevent"])},[e("div",oe,[i(k,{errors:o.form.errors},null,8,["errors"]),i(x,{ref:"rename",modelValue:o.form.label,"onUpdate:modelValue":t[4]||(t[4]=u=>o.form.label=u),label:s.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:t[5]||(t[5]=u=>o.editGiftOccasionId=0)},null,8,["modelValue","label"])]),e("div",ie,[i(w,{text:s.$t("Cancel"),class:p("me-3"),onClick:t[6]||(t[6]=y(u=>o.editGiftOccasionId=0,["prevent"]))},null,8,["text"]),i(b,{text:s.$t("Rename"),state:o.loadingState,icon:"check",class:p("save")},null,8,["text","state"])])],40,se))]),_:1},8,["list","onChange"])])):m("",!0),o.localGiftOccasions.length===0?(d(),h("div",ae,[e("p",re,r(s.$t("Gift occasions let you categorize all your gifts.")),1)])):m("",!0)])])]),_:1},8,["layout-data"])}const ge=T(P,[["render",le],["__scopeId","data-v-3264c857"]]);export{ge as default};
