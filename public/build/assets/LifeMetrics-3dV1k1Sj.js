import{T as K,r as h,h as n,a,t as c,c as C,n as y,j as v,l as L,b as d,u as m,F as T,k as E,A as U,o as r,d as V,w,D as O,m as x,p as g}from"./app-BmMnv7Hf.js";import{E as S}from"./Errors-DkF-M9C7.js";import{P as f}from"./PrettyButton-DJ97II5T.js";import{T as I}from"./TextInput-DPfNN3hz.js";import{P as j}from"./PrettySpan-DbeWKi_L.js";import{H as W}from"./HoverMenu-Rxa0RyO0.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as _}from"./index-BX-obcj7.js";import"./omit-BpS3z5OW.js";const Q={class:"mb-10"},R={class:"mb-3 items-center justify-between border-b border-gray-200 pb-2 dark:border-gray-700 sm:flex"},X={class:"mb-2 sm:mb-0"},Y={class:"font-semibold"},Z={class:"border-b border-gray-200 p-5 dark:border-gray-700"},M={class:"flex justify-between p-5"},ee={key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},te={key:0,class:"flex items-center justify-between p-3"},se={class:"me-8 flex w-full items-center justify-between"},ae={class:"mb-1 text-lg font-semibold"},le=["onClick"],oe=["onClick"],re={class:"cursor-pointer whitespace-nowrap rounded-lg bg-slate-100 px-2 py-0.5 text-sm text-slate-400"},ne={class:"cursor-pointer whitespace-nowrap rounded-lg bg-yellow-100 px-2 py-0.5 text-sm text-slate-400"},de={class:"cursor-pointer whitespace-nowrap rounded-lg bg-green-100 px-2 py-0.5 text-sm text-slate-400"},ie={key:1,class:"w-full px-3 py-4 text-xl sm:w-fit"},ue={key:1,class:"m-3 mb-2 rounded-lg border border-gray-200"},ce={class:"charts-css column show-labels show-primary-axis h-72"},me={class:"tooltip"},pe=["onSubmit"],ve={class:"border-b border-gray-200 p-5 dark:border-gray-700"},be={class:"flex justify-between p-5"},he={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},ye=["alt"],ge={class:"px-5 pb-5 pt-2 text-center"},fe={__name:"LifeMetrics",props:{data:Object},setup(A){const $=A,i=K({label:""}),b=h(!1),k=h(null),u=h(""),l=h($.data.data),p=h(0),N=h(0),B=()=>{b.value=!0,i.label="",U().then(()=>k.value.focus())},P=e=>{p.value=e.id,i.label=e.label},F=e=>{N.value=e.id},z=e=>{let s=l.value.findIndex(t=>t.id===e.id);l.value[s].show_graph=!l.value[s].show_graph},D=()=>{u.value="loading",axios.post($.data.url.store,i).then(e=>{x(g("The life metric has been created"),"success"),u.value="",b.value=!1,l.value.push(e.data.data)}).catch(()=>{u.value=""})},H=e=>{u.value="loading",axios.post(e.url.store,i).then(s=>{u.value="",l.value[l.value.findIndex(t=>t.id===e.id)]=s.data.data,l.value[l.value.findIndex(t=>t.id===e.id)].incremented=!0}).catch(()=>{u.value=""})},q=e=>{u.value="loading",axios.put(e.url.update,i).then(s=>{x(g("The life metric has been updated"),"success"),u.value="",p.value=0,l.value[l.value.findIndex(t=>t.id===e.id)]=s.data.data}).catch(()=>{u.value=""})},G=e=>{confirm(g("Are you sure? This action cannot be undone."))&&axios.delete(e.url.destroy).then(()=>{x(g("The life metric has been deleted"),"success");let s=l.value.findIndex(t=>t.id===e.id);l.value.splice(s,1)}).catch(()=>{})};return(e,s)=>(r(),n("div",Q,[a("div",R,[a("div",X,[s[7]||(s[7]=a("span",{class:"relative me-1"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"relative inline h-4 w-4"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z"})])],-1)),a("span",Y,c(e.$t("Life metrics")),1)]),b.value?v("",!0):(r(),C(f,{key:0,text:e.$t("Track a new metric"),icon:"plus",class:y("w-full sm:w-fit"),onClick:B},null,8,["text"]))]),b.value?(r(),n("form",{key:0,class:"mb-2 mt-2 rounded-lg border border-gray-200 bg-gray-50 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:s[3]||(s[3]=L(t=>D(),["prevent"]))},[a("div",Z,[d(S,{errors:m(i).errors},null,8,["errors"]),d(I,{ref_key:"labelField",ref:k,modelValue:m(i).label,"onUpdate:modelValue":s[0]||(s[0]=t=>m(i).label=t),label:e.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,placeholder:e.$t("Watch Netflix every day"),maxlength:255,onEscKeyPressed:s[1]||(s[1]=t=>b.value=!1)},null,8,["modelValue","label","placeholder"])]),a("div",M,[d(j,{text:e.$t("Cancel"),class:y("me-3"),onClick:s[2]||(s[2]=t=>b.value=!1)},null,8,["text"]),d(f,{text:e.$t("Save"),state:u.value,icon:"plus",class:y("save")},null,8,["text","state"])])],32)):v("",!0),a("div",null,[l.value.length>0?(r(),n("ul",ee,[(r(!0),n(T,null,E(l.value,t=>(r(),n("li",{key:t.id,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},[p.value!==t.id?(r(),n("div",te,[a("div",se,[a("div",null,[a("p",ae,c(t.label),1),a("ul",{onClick:o=>z(t)},[a("li",{onClick:o=>F(t),class:"text-sm text-gray-600"},[V(c(e.$t("Total:"))+" ",1),d(m(_),{placement:"bottomLeft",title:e.$t("Events this week"),"arrow-point-at-center":""},{default:w(()=>[a("span",re,c(t.stats.weekly_events),1)]),_:2},1032,["title"]),s[8]||(s[8]=a("span",{class:"mx-1 text-gray-400"},"/",-1)),d(m(_),{placement:"bottomLeft",title:e.$t("Events this month"),"arrow-point-at-center":""},{default:w(()=>[a("span",ne,c(t.stats.monthly_events),1)]),_:2},1032,["title"]),s[9]||(s[9]=a("span",{class:"mx-1 text-gray-400"},"/",-1)),d(m(_),{placement:"bottomLeft",title:e.$t("Events this year"),"arrow-point-at-center":""},{default:w(()=>[a("span",de,c(t.stats.yearly_events),1)]),_:2},1032,["title"])],8,oe)],8,le)]),t.incremented?(r(),n("span",ie,"ðŸ¤­")):(r(),C(f,{key:0,text:"+ 1",class:y("w-full px-8 py-4 sm:w-fit"),onClick:o=>H(t)},null,8,["onClick"]))]),d(W,{"show-edit":!0,"show-delete":!0,onEdit:o=>P(t),onDelete:o=>G(t)},null,8,["onEdit","onDelete"])])):v("",!0),p.value!==t.id&&t.show_graph?(r(),n("div",ue,[a("table",ce,[a("tbody",null,[(r(!0),n(T,null,E(t.months,o=>(r(),n("tr",{key:o.id},[a("td",{style:O("--size: calc("+o.events+"/"+t.max_number_of_events)},[V(c(o.friendly_name)+" ",1),a("span",me,c(o.events)+" events ",1)],4)]))),128))])])])):v("",!0),p.value===t.id?(r(),n("form",{key:2,class:"bg-gray-50 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:L(o=>q(t),["prevent"])},[a("div",ve,[d(S,{errors:m(i).errors},null,8,["errors"]),d(I,{ref_for:!0,ref_key:"labelField",ref:k,modelValue:m(i).label,"onUpdate:modelValue":s[4]||(s[4]=o=>m(i).label=o),label:e.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:s[5]||(s[5]=o=>p.value=0)},null,8,["modelValue","label"])]),a("div",be,[d(j,{text:e.$t("Cancel"),class:y("me-3"),onClick:s[6]||(s[6]=o=>p.value=0)},null,8,["text"]),d(f,{text:e.$t("Save"),state:u.value,icon:"check",class:y("save")},null,8,["text","state"])])],40,pe)):v("",!0)]))),128))])):v("",!0),l.value.length===0?(r(),n("div",he,[a("img",{src:"/img/vault_life_metrics_blank.svg",alt:e.$t("Life events"),class:"mx-auto mt-4 h-20 w-20"},null,8,ye),a("p",ge,c(e.$t("Life metrics let you track metrics that are important to you.")),1)])):v("",!0)])]))}},Ve=J(fe,[["__scopeId","data-v-f1f31687"]]);export{Ve as default};
