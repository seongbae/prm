import{i as I,H as v,c as G,w,o as d,a as s,t as n,b as a,d as R,j as u,h as p,n as m,l as f,F as M,k as _}from"./app-BmMnv7Hf.js";import{L as C}from"./Layout-Csq83W0y.js";import{P as V}from"./PrettyButton-DJ97II5T.js";import{P as $}from"./PrettySpan-DbeWKi_L.js";import{T as N}from"./TextInput-DPfNN3hz.js";import{E as j}from"./Errors-DkF-M9C7.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={components:{InertiaLink:I,Layout:C,PrettyButton:V,PrettySpan:$,TextInput:N,Errors:j},props:{layoutData:{type:Object,default:null},data:{type:Object,default:null}},data(){return{loadingState:"",createRelationshipGroupTypeModalShown:!1,renameRelationshipGroupTypeModalShownId:0,createRelationshipTypeModalId:0,renameRelationshipTypeModalId:0,localGroupTypes:[],form:{relationshipGroupTypeName:"",name:"",nameReverseRelationship:"",errors:[]}}},mounted(){this.localGroupTypes=this.data.group_types},methods:{showCreateRelationshipGroupTypeModal(){this.form.relationshipGroupTypeName="",this.createRelationshipGroupTypeModalShown=!0,this.renameRelationshipGroupTypeModalShownId=0,this.createRelationshipTypeModalId=0,this.renameRelationshipTypeModalId=0,this.$nextTick().then(()=>{this.$refs.newGroupType.focus()})},renameRelationshipGroupTypeModal(t){this.form.relationshipGroupTypeName=t.name,this.renameRelationshipGroupTypeModalShownId=t.id,this.createRelationshipGroupTypeModalShown=!1,this.createRelationshipTypeModalId=0,this.renameRelationshipTypeModalId=0,this.$nextTick().then(()=>{this.$refs.renameGroupType[0].focus()})},showRelationshipTypeModal(t){this.form.name="",this.form.nameReverseRelationship="",this.createRelationshipTypeModalId=t.id,this.renameRelationshipTypeModalId=0,this.renameRelationshipGroupTypeModalShownId=0,this.createRelationshipGroupTypeModalShown=!1,this.$nextTick().then(()=>{this.$refs.newRelationshipType[0].focus()})},renameRelationTypeModal(t){this.form.name=t.name,this.form.nameReverseRelationship=t.name_reverse_relationship,this.renameRelationshipTypeModalId=t.id,this.createRelationshipTypeModalId=0,this.renameRelationshipGroupTypeModalShownId=0,this.createRelationshipGroupTypeModalShown=!1,this.$nextTick().then(()=>{this.$refs.rename[0].focus()})},submitGroupType(){this.loadingState="loading",axios.post(this.data.url.group_type_store,this.form).then(t=>{this.flash(this.$t("The group type has been created"),"success"),this.localGroupTypes.unshift(t.data.data),this.loadingState=null,this.createRelationshipTypeModalShown=!1}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},updateGroupType(t){this.loadingState="loading",axios.put(t.url.update,this.form).then(e=>{this.flash(this.$t("The group type has been updated"),"success"),this.localGroupTypes[this.localGroupTypes.findIndex(i=>i.id===t.id)]=e.data.data,this.loadingState=null,this.renameRelationshipGroupTypeModalShownId=0}).catch(e=>{this.loadingState=null,this.form.errors=e.response.data})},destroyGroupType(t){confirm(this.$t("Are you sure? This will delete all the relationships of this type for all the contacts that were using it."))&&axios.delete(t.url.destroy).then(()=>{this.flash(this.$t("The group type has been deleted"),"success");var e=this.localGroupTypes.findIndex(i=>i.id===t.id);this.localGroupTypes.splice(e,1)}).catch(e=>{this.loadingState=null,this.form.errors=e.response.data})},storeRelationshipType(t){this.loadingState="loading",axios.post(t.url.store,this.form).then(e=>{this.flash(this.$t("The relationship type has been created"),"success"),this.loadingState=null,this.createRelationshipTypeModalId=0;var i=this.localGroupTypes.findIndex(y=>y.id===t.id);this.localGroupTypes[i].types.unshift(e.data.data)}).catch(e=>{this.loadingState=null,this.form.errors=e.response.data})},updateRelationType(t,e){this.loadingState="loading",axios.put(e.url.update,this.form).then(i=>{this.flash(this.$t("The relationship type has been updated"),"success"),this.loadingState=null,this.renameRelationshipTypeModalId=0;var y=this.localGroupTypes.findIndex(h=>h.id===t.id),o=this.localGroupTypes[y].types.findIndex(h=>h.id===e.id);this.localGroupTypes[y].types[o]=i.data.data}).catch(i=>{this.loadingState=null,this.form.errors=i.response.data})},destroyRelationshipType(t,e){confirm(this.$t("Are you sure? This will delete all the relationships of this type for all the contacts that were using it."))&&axios.delete(e.url.destroy).then(()=>{this.flash(this.$t("The relationship type has been deleted"),"success");var i=this.localGroupTypes.findIndex(o=>o.id===t.id),y=this.localGroupTypes[i].types.findIndex(o=>o.id===e.id);this.localGroupTypes[i].types.splice(y,1)}).catch(i=>{this.loadingState=null,this.form.errors=i.response.data})}}},E={class:"bg-white dark:bg-gray-900 sm:border-b"},q={class:"max-w-8xl mx-auto hidden px-4 py-2 sm:px-6 md:block"},A={class:"flex items-baseline justify-between space-x-6"},K={class:"text-sm"},L={class:"me-2 inline text-gray-600 dark:text-gray-400"},U={class:"me-2 inline"},D={class:"me-2 inline"},z={class:"inline"},F={class:"relative sm:mt-20"},H={class:"mx-auto max-w-3xl px-2 py-2 sm:px-6 sm:py-6 lg:px-8"},O={class:"mb-6 mt-8 items-center justify-between sm:mt-0 sm:flex"},W={class:"mb-4 sm:mb-0"},Y={class:"mb-6 flex rounded border bg-slate-50 px-3 py-2 text-sm dark:border-gray-700 dark:bg-slate-900"},J={class:"mb-2"},Q={class:"mb-2 list-disc ps-4"},X={class:"mb-2"},Z={class:"border-b border-gray-200 p-5 dark:border-gray-700"},ee={class:"flex justify-between p-5"},te={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},se={key:0,class:"item-list flex items-center justify-between border-b border-gray-200 px-5 py-2 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},oe={class:"text-base font-semibold"},re={class:"text-sm"},le=["onClick"],ae={class:"text-blue-500 hover:underline"},ie=["onClick"],ne=["onSubmit"],de={class:"border-b border-gray-200 p-5 dark:border-gray-700"},pe={class:"flex justify-between p-5"},he={key:0,class:"flex items-center justify-between"},ue={class:"relative"},me={class:"text-sm"},ce=["onClick"],ye={class:"text-blue-500 hover:underline"},fe=["onClick"],be=["onSubmit"],ve={class:"border-b border-gray-200 p-5 dark:border-gray-700"},ge={class:"flex justify-between p-5"},ke={key:2,class:"item-list border-b border-gray-200 px-5 py-2 ps-6 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},Te=["onClick"],we=["onSubmit"],Re={class:"border-b border-gray-200 p-5 dark:border-gray-700"},xe={class:"flex justify-between p-5"},Ge={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},Me={class:"p-5 text-center"};function _e(t,e,i,y,o,h){const x=v("InertiaLink"),g=v("pretty-button"),k=v("errors"),b=v("text-input"),T=v("pretty-span"),S=v("layout");return d(),G(S,{"layout-data":i.layoutData},{default:w(()=>[s("nav",E,[s("div",q,[s("div",A,[s("ul",K,[s("li",L,n(t.$t("You are here:")),1),s("li",U,[a(x,{href:i.data.url.settings,class:"text-blue-500 hover:underline"},{default:w(()=>[R(n(t.$t("Settings")),1)]),_:1},8,["href"])]),e[17]||(e[17]=s("li",{class:"relative me-2 inline"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),s("li",D,[a(x,{href:i.data.url.personalize,class:"text-blue-500 hover:underline"},{default:w(()=>[R(n(t.$t("Personalize your account")),1)]),_:1},8,["href"])]),e[18]||(e[18]=s("li",{class:"relative me-2 inline"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),s("li",z,n(t.$t("Relationship types")),1)])])])]),s("main",F,[s("div",H,[s("div",O,[s("h3",W,[e[19]||(e[19]=s("span",{class:"me-1"}," ðŸ¥¸ ",-1)),R(" "+n(t.$t("All the relationship types")),1)]),o.createRelationshipGroupTypeModalShown?u("",!0):(d(),G(g,{key:0,text:t.$t("Add a relationship group type"),icon:"plus",onClick:h.showCreateRelationshipGroupTypeModal},null,8,["text","onClick"]))]),s("div",Y,[e[20]||(e[20]=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 grow pe-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),s("div",null,[s("p",J,n(t.$t("When you define a relationship between two contacts, for instance a father-son relationship, Monica creates two relations, one for each contact:")),1),s("ul",Q,[s("li",null,n(t.$t("a father-son relation shown on the father page,")),1),s("li",null,n(t.$t("a son-father relation shown on the son page.")),1)]),s("p",X,n(t.$t("We call them a relation, and its reverse relation. For each relation you define, you need to define its counterpart.")),1)])]),o.createRelationshipGroupTypeModalShown?(d(),p("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:e[3]||(e[3]=f(l=>h.submitGroupType(),["prevent"]))},[s("div",Z,[a(k,{errors:o.form.errors},null,8,["errors"]),a(b,{ref:"newGroupType",modelValue:o.form.relationshipGroupTypeName,"onUpdate:modelValue":e[0]||(e[0]=l=>o.form.relationshipGroupTypeName=l),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[1]||(e[1]=l=>o.createRelationshipGroupTypeModalShown=!1)},null,8,["modelValue","label"])]),s("div",ee,[a(T,{text:t.$t("Cancel"),class:m("me-3"),onClick:e[2]||(e[2]=l=>o.createRelationshipGroupTypeModalShown=!1)},null,8,["text"]),a(g,{text:t.$t("Save"),state:o.loadingState,icon:"plus",class:m("save")},null,8,["text","state"])])],32)):u("",!0),o.localGroupTypes.length>0?(d(),p("ul",te,[(d(!0),p(M,null,_(o.localGroupTypes,l=>(d(),p("li",{key:l.id},[o.renameRelationshipGroupTypeModalShownId!==l.id?(d(),p("div",se,[s("span",oe,n(l.name),1),s("ul",re,[s("li",{class:"inline cursor-pointer",onClick:r=>h.renameRelationshipGroupTypeModal(l)},[s("span",ae,n(t.$t("Rename")),1)],8,le),l.can_be_deleted?(d(),p("li",{key:0,class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:r=>h.destroyGroupType(l)},n(t.$t("Delete")),9,ie)):u("",!0)])])):u("",!0),o.renameRelationshipGroupTypeModalShownId===l.id?(d(),p("form",{key:1,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:f(r=>h.updateGroupType(l),["prevent"])},[s("div",de,[a(k,{errors:o.form.errors},null,8,["errors"]),a(b,{ref_for:!0,ref:"renameGroupType",modelValue:o.form.relationshipGroupTypeName,"onUpdate:modelValue":e[4]||(e[4]=r=>o.form.relationshipGroupTypeName=r),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[5]||(e[5]=r=>o.renameRelationshipGroupTypeModalShownId=0)},null,8,["modelValue","label"])]),s("div",pe,[a(T,{text:t.$t("Cancel"),class:m("me-3"),onClick:e[6]||(e[6]=f(r=>o.renameRelationshipGroupTypeModalShownId=0,["prevent"]))},null,8,["text"]),a(g,{text:t.$t("Rename"),state:o.loadingState,icon:"check",class:m("save")},null,8,["text","state"])])],40,ne)):u("",!0),(d(!0),p(M,null,_(l.types,r=>(d(),p("div",{key:r.id,class:"border-b border-gray-200 px-5 py-2 ps-6 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},[o.renameRelationshipTypeModalId!==r.id?(d(),p("div",he,[s("div",ue,[s("span",null,n(r.name),1),e[21]||(e[21]=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"relative inline h-5 w-5 px-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})],-1)),s("span",null,n(r.name_reverse_relationship),1)]),s("ul",me,[s("li",{class:"inline cursor-pointer",onClick:c=>h.renameRelationTypeModal(r)},[s("span",ye,n(t.$t("Rename")),1)],8,ce),r.can_be_deleted?(d(),p("li",{key:0,class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:c=>h.destroyRelationshipType(l,r)},n(t.$t("Delete")),9,fe)):u("",!0)])])):u("",!0),o.renameRelationshipTypeModalId===r.id?(d(),p("form",{key:1,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:f(c=>h.updateRelationType(l,r),["prevent"])},[s("div",ve,[a(k,{errors:o.form.errors},null,8,["errors"]),a(b,{ref_for:!0,ref:"rename",modelValue:o.form.name,"onUpdate:modelValue":e[7]||(e[7]=c=>o.form.name=c),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,class:m("mb-4"),placeholder:t.$t("Parent"),autocomplete:!1,maxlength:255,onEscKeyPressed:e[8]||(e[8]=c=>o.renameRelationshipTypeModalId=0)},null,8,["modelValue","label","placeholder"]),a(b,{modelValue:o.form.nameReverseRelationship,"onUpdate:modelValue":e[9]||(e[9]=c=>o.form.nameReverseRelationship=c),label:t.$t("Name of the reverse relationship"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,placeholder:t.$t("Child"),maxlength:255,onEscKeyPressed:e[10]||(e[10]=c=>o.renameRelationshipTypeModalId=0)},null,8,["modelValue","label","placeholder"])]),s("div",ge,[a(T,{text:t.$t("Cancel"),class:m("me-3"),onClick:e[11]||(e[11]=f(c=>o.renameRelationshipTypeModalId=0,["prevent"]))},null,8,["text"]),a(g,{text:t.$t("Rename"),state:o.loadingState,icon:"check",class:m("save")},null,8,["text","state"])])],40,be)):u("",!0)]))),128)),o.createRelationshipTypeModalId!==l.id?(d(),p("div",ke,[s("span",{class:"cursor-pointer text-sm text-blue-500 hover:underline",onClick:r=>h.showRelationshipTypeModal(l)},n(t.$t("Add a relationship type")),9,Te)])):u("",!0),o.createRelationshipTypeModalId===l.id?(d(),p("form",{key:3,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:f(r=>h.storeRelationshipType(l),["prevent"])},[s("div",Re,[a(k,{errors:o.form.errors},null,8,["errors"]),a(b,{ref_for:!0,ref:"newRelationshipType",modelValue:o.form.name,"onUpdate:modelValue":e[12]||(e[12]=r=>o.form.name=r),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,class:m("mb-4"),placeholder:t.$t("Parent"),autocomplete:!1,maxlength:255,onEscKeyPressed:e[13]||(e[13]=r=>o.createRelationshipTypeModalId=0)},null,8,["modelValue","label","placeholder"]),a(b,{modelValue:o.form.nameReverseRelationship,"onUpdate:modelValue":e[14]||(e[14]=r=>o.form.nameReverseRelationship=r),label:t.$t("Name of the reverse relationship"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,placeholder:t.$t("Child"),maxlength:255,onEscKeyPressed:e[15]||(e[15]=r=>o.createRelationshipTypeModalId=0)},null,8,["modelValue","label","placeholder"])]),s("div",xe,[a(T,{text:t.$t("Cancel"),class:m("me-3"),onClick:e[16]||(e[16]=f(r=>o.createRelationshipTypeModalId=0,["prevent"]))},null,8,["text"]),a(g,{text:t.$t("Add"),state:o.loadingState,icon:"plus",class:m("save")},null,8,["text","state"])])],40,we)):u("",!0)]))),128))])):u("",!0),o.localGroupTypes.length===0?(d(),p("div",Ge,[s("p",Me,n(t.$t("Relationship types let you link contacts and document how they are connected.")),1)])):u("",!0)])])]),_:1},8,["layout-data"])}const Pe=P(B,[["render",_e],["__scopeId","data-v-9ec869d1"]]);export{Pe as default};
