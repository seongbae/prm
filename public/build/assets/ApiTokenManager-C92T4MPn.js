import{e as me,g as ye,T as B,r as F,f as ve,h as x,b as _,w as v,a as S,j as M,o as P,d as T,t as g,u as $,F as Y,k as G,n as X,l as W,m as ge,p as he}from"./app-BmMnv7Hf.js";import{_ as Z}from"./ActionMessage-CuI3AN2E.js";import{_ as be}from"./ActionSection-BsM9aqa2.js";import{_ as J}from"./Button-BWK-thSE.js";import{_ as ke}from"./ConfirmationModal-Dcz2uZEg.js";import{_ as _e}from"./DangerButton-OSGRtkYA.js";import{_ as q}from"./DialogModal-BdRnJ9VP.js";import{_ as Ce}from"./FormSection-Bek7E_Q1.js";import{_ as Te}from"./Input-CLHvIp3o.js";import{_ as ee}from"./Checkbox-C5vD6F-i.js";import{_ as we}from"./InputError-CqlclkzZ.js";import{_ as te}from"./Label-DWTE4-tY.js";import{_ as K}from"./SecondaryButton-3_x4XnxO.js";import"./SectionTitle-f8TQ5xLi.js";import"./PrettyButton-DJ97II5T.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-COqoaAX8.js";var ne={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(L,V){(function(E,w){L.exports=w()})(me,function(){return function(){var C={686:function(u,r,e){e.d(r,{default:function(){return pe}});var c=e(279),f=e.n(c),p=e(370),k=e.n(p),b=e(817),A=e.n(b);function m(a){try{return document.execCommand(a)}catch{return!1}}var h=function(o){var n=A()(o);return m("cut"),n},t=h;function l(a){var o=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[o?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(i,"px"),n.setAttribute("readonly",""),n.value=a,n}var y=function(o,n){var i=l(o);n.container.appendChild(i);var s=A()(i);return m("copy"),i.remove(),s},j=function(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},i="";return typeof o=="string"?i=y(o,n):o instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(o==null?void 0:o.type)?i=y(o.value,n):(i=A()(o),m("copy")),i},U=j;function I(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?I=function(n){return typeof n}:I=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},I(a)}var oe=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=o.action,i=n===void 0?"copy":n,s=o.container,d=o.target,O=o.text;if(i!=="copy"&&i!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(d!==void 0)if(d&&I(d)==="object"&&d.nodeType===1){if(i==="copy"&&d.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(i==="cut"&&(d.hasAttribute("readonly")||d.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(O)return U(O,{container:s});if(d)return i==="cut"?t(d):U(d,{container:s})},re=oe;function N(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?N=function(n){return typeof n}:N=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},N(a)}function ie(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function Q(a,o){for(var n=0;n<o.length;n++){var i=o[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}function se(a,o,n){return o&&Q(a.prototype,o),n&&Q(a,n),a}function ae(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),o&&H(a,o)}function H(a,o){return H=Object.setPrototypeOf||function(i,s){return i.__proto__=s,i},H(a,o)}function ue(a){var o=fe();return function(){var i=R(a),s;if(o){var d=R(this).constructor;s=Reflect.construct(i,arguments,d)}else s=i.apply(this,arguments);return le(this,s)}}function le(a,o){return o&&(N(o)==="object"||typeof o=="function")?o:ce(a)}function ce(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function fe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function R(a){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},R(a)}function z(a,o){var n="data-clipboard-".concat(a);if(o.hasAttribute(n))return o.getAttribute(n)}var de=function(a){ae(n,a);var o=ue(n);function n(i,s){var d;return ie(this,n),d=o.call(this),d.resolveOptions(s),d.listenClick(i),d}return se(n,[{key:"resolveOptions",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof s.action=="function"?s.action:this.defaultAction,this.target=typeof s.target=="function"?s.target:this.defaultTarget,this.text=typeof s.text=="function"?s.text:this.defaultText,this.container=N(s.container)==="object"?s.container:document.body}},{key:"listenClick",value:function(s){var d=this;this.listener=k()(s,"click",function(O){return d.onClick(O)})}},{key:"onClick",value:function(s){var d=s.delegateTarget||s.currentTarget,O=this.action(d)||"copy",D=re({action:O,container:this.container,target:this.target(d),text:this.text(d)});this.emit(D?"success":"error",{action:O,text:D,trigger:d,clearSelection:function(){d&&d.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(s){return z("action",s)}},{key:"defaultTarget",value:function(s){var d=z("target",s);if(d)return document.querySelector(d)}},{key:"defaultText",value:function(s){return z("text",s)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return U(s,d)}},{key:"cut",value:function(s){return t(s)}},{key:"isSupported",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],d=typeof s=="string"?[s]:s,O=!!document.queryCommandSupported;return d.forEach(function(D){O=O&&!!document.queryCommandSupported(D)}),O}}]),n}(f()),pe=de},828:function(u){var r=9;if(typeof Element<"u"&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}function c(f,p){for(;f&&f.nodeType!==r;){if(typeof f.matches=="function"&&f.matches(p))return f;f=f.parentNode}}u.exports=c},438:function(u,r,e){var c=e(828);function f(b,A,m,h,t){var l=k.apply(this,arguments);return b.addEventListener(m,l,t),{destroy:function(){b.removeEventListener(m,l,t)}}}function p(b,A,m,h,t){return typeof b.addEventListener=="function"?f.apply(null,arguments):typeof m=="function"?f.bind(null,document).apply(null,arguments):(typeof b=="string"&&(b=document.querySelectorAll(b)),Array.prototype.map.call(b,function(l){return f(l,A,m,h,t)}))}function k(b,A,m,h){return function(t){t.delegateTarget=c(t.target,A),t.delegateTarget&&h.call(b,t)}}u.exports=p},879:function(u,r){r.node=function(e){return e!==void 0&&e instanceof HTMLElement&&e.nodeType===1},r.nodeList=function(e){var c=Object.prototype.toString.call(e);return e!==void 0&&(c==="[object NodeList]"||c==="[object HTMLCollection]")&&"length"in e&&(e.length===0||r.node(e[0]))},r.string=function(e){return typeof e=="string"||e instanceof String},r.fn=function(e){var c=Object.prototype.toString.call(e);return c==="[object Function]"}},370:function(u,r,e){var c=e(879),f=e(438);function p(m,h,t){if(!m&&!h&&!t)throw new Error("Missing required arguments");if(!c.string(h))throw new TypeError("Second argument must be a String");if(!c.fn(t))throw new TypeError("Third argument must be a Function");if(c.node(m))return k(m,h,t);if(c.nodeList(m))return b(m,h,t);if(c.string(m))return A(m,h,t);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function k(m,h,t){return m.addEventListener(h,t),{destroy:function(){m.removeEventListener(h,t)}}}function b(m,h,t){return Array.prototype.forEach.call(m,function(l){l.addEventListener(h,t)}),{destroy:function(){Array.prototype.forEach.call(m,function(l){l.removeEventListener(h,t)})}}}function A(m,h,t){return f(document.body,m,h,t)}u.exports=p},817:function(u){function r(e){var c;if(e.nodeName==="SELECT")e.focus(),c=e.value;else if(e.nodeName==="INPUT"||e.nodeName==="TEXTAREA"){var f=e.hasAttribute("readonly");f||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),f||e.removeAttribute("readonly"),c=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var p=window.getSelection(),k=document.createRange();k.selectNodeContents(e),p.removeAllRanges(),p.addRange(k),c=p.toString()}return c}u.exports=r},279:function(u){function r(){}r.prototype={on:function(e,c,f){var p=this.e||(this.e={});return(p[e]||(p[e]=[])).push({fn:c,ctx:f}),this},once:function(e,c,f){var p=this;function k(){p.off(e,k),c.apply(f,arguments)}return k._=c,this.on(e,k,f)},emit:function(e){var c=[].slice.call(arguments,1),f=((this.e||(this.e={}))[e]||[]).slice(),p=0,k=f.length;for(p;p<k;p++)f[p].fn.apply(f[p].ctx,c);return this},off:function(e,c){var f=this.e||(this.e={}),p=f[e],k=[];if(p&&c)for(var b=0,A=p.length;b<A;b++)p[b].fn!==c&&p[b].fn._!==c&&k.push(p[b]);return k.length?f[e]=k:delete f[e],this}},u.exports=r,u.exports.TinyEmitter=r}},E={};function w(u){if(E[u])return E[u].exports;var r=E[u]={exports:{}};return C[u](r,r.exports,w),r.exports}return function(){w.n=function(u){var r=u&&u.__esModule?function(){return u.default}:function(){return u};return w.d(r,{a:r}),r}}(),function(){w.d=function(u,r){for(var e in r)w.o(r,e)&&!w.o(u,e)&&Object.defineProperty(u,e,{enumerable:!0,get:r[e]})}}(),function(){w.o=function(u,r){return Object.prototype.hasOwnProperty.call(u,r)}}(),w(686)}().default})})(ne);var Ae=ne.exports;const Se=ye(Ae),$e=L=>({toClipboard(V,C){return new Promise((E,w)=>{const u=document.createElement("button"),r=new Se(u,{text:()=>V,action:()=>"copy",container:C!==void 0?C:document.body});r.on("success",e=>{r.destroy(),E(e)}),r.on("error",e=>{r.destroy(),w(e)}),document.body.appendChild(u),u.click(),document.body.removeChild(u)})}}),Ee={class:"col-span-6 mb-4 sm:col-span-4"},xe={key:0,class:"col-span-6"},Pe={class:"mt-2 grid grid-cols-1 gap-4 md:grid-cols-2"},Oe={class:"flex items-center"},Le={class:"ms-2 text-sm text-gray-600 dark:text-gray-400"},je={key:0},Ne={class:"mt-10 sm:mt-0"},Me={class:"space-y-6"},Ie={class:"flex items-center"},Re={key:0,class:"text-sm text-gray-400"},De=["onClick"],Fe=["onClick"],Ve={key:0,class:"mt-4 flex"},Ue={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},He={class:"flex items-center"},ze={class:"ms-2 text-sm text-gray-600 dark:text-gray-400"},ut={__name:"ApiTokenManager",props:{tokens:Array,availablePermissions:Array,defaultPermissions:Array},setup(L){const C=B({name:"",permissions:L.defaultPermissions}),E=B({permissions:[]}),w=B({}),u=F(!1),r=F(null),e=F(null);ve(()=>C.permissions,async t=>{t.findIndex(l=>l==="write")>=0&&t.findIndex(l=>l==="read")<=-1&&C.permissions.push("read")});const c=()=>{C.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{u.value=!0,C.reset()}})},f=t=>{E.permissions=t.abilities,r.value=t},p=()=>{E.put(route("api-tokens.update",r.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>r.value=null})},k=t=>{e.value=t},b=()=>{w.delete(route("api-tokens.destroy",e.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>e.value=null})},A=F(!1),{toClipboard:m}=$e(),h=t=>{m(t).then(()=>{A.value=!0,setTimeout(()=>A.value=!1,2e3),ge(he("Value copied into your clipboard"))})};return(t,l)=>(P(),x("div",null,[_(Ce,{onSubmitted:c},{title:v(()=>[T(g(t.$t("Create API Token")),1)]),description:v(()=>[T(g(t.$t("API tokens allow third-party services to authenticate with our application on your behalf.")),1)]),form:v(()=>[S("div",Ee,[_(te,{for:"name",value:t.$t("Token name (for your reference only)")},null,8,["value"]),_(Te,{id:"name",modelValue:$(C).name,"onUpdate:modelValue":l[0]||(l[0]=y=>$(C).name=y),type:"text",class:"mt-1 block w-full",autofocus:""},null,8,["modelValue"]),_(we,{message:$(C).errors.name,class:"mt-2"},null,8,["message"])]),L.availablePermissions.length>0?(P(),x("div",xe,[_(te,{for:"permissions",value:t.$t("Permissions")},null,8,["value"]),S("div",Pe,[(P(!0),x(Y,null,G(L.availablePermissions,y=>(P(),x("div",{key:y},[S("label",Oe,[_(ee,{checked:$(C).permissions,"onUpdate:checked":l[1]||(l[1]=j=>$(C).permissions=j),value:y},null,8,["checked","value"]),S("span",Le,g(y),1)])]))),128))])])):M("",!0)]),actions:v(()=>[_(Z,{on:$(C).recentlySuccessful,class:"me-3"},{default:v(()=>[T(g(t.$t("Created.")),1)]),_:1},8,["on"]),_(J,{class:X({"opacity-25":$(C).processing}),disabled:$(C).processing},{default:v(()=>[T(g(t.$t("Create")),1)]),_:1},8,["class","disabled"])]),_:1}),L.tokens.length>0?(P(),x("div",je,[S("div",Ne,[_(be,null,{title:v(()=>[T(g(t.$t("Manage API Tokens")),1)]),description:v(()=>[T(g(t.$t("You may delete any of your existing tokens if they are no longer needed.")),1)]),content:v(()=>[S("div",Me,[(P(!0),x(Y,null,G(L.tokens,y=>(P(),x("div",{key:y.id,class:"flex items-center justify-between"},[S("div",null,g(y.name),1),S("div",Ie,[y.last_used_ago?(P(),x("div",Re,g(t.$t("Last used :date",{date:y.last_used_ago})),1)):M("",!0),L.availablePermissions.length>0?(P(),x("button",{key:1,class:"ms-6 cursor-pointer text-sm text-gray-400 underline",onClick:j=>f(y)},g(t.$t("Permissions")),9,De)):M("",!0),S("button",{class:"ms-6 cursor-pointer text-sm text-red-500",onClick:j=>k(y)},g(t.$t("Delete")),9,Fe)])]))),128))])]),_:1})])])):M("",!0),_(q,{show:u.value,onClose:l[5]||(l[5]=y=>u.value=!1)},{title:v(()=>[T(g(t.$t("API Token")),1)]),content:v(()=>[S("div",null,g(t.$t("Please copy your new API token. For your security, it won’t be shown again.")),1),t.$page.props.jetstream.flash.token?(P(),x("div",Ve,[S("div",{class:"rounded bg-gray-100 px-4 py-2 font-mono text-sm text-gray-500",onClick:l[2]||(l[2]=W(y=>h(t.$page.props.jetstream.flash.token),["prevent"]))},g(t.$page.props.jetstream.flash.token),1),_(J,{class:"ms-3",title:t.$t("Copy value into the clipboard"),onClick:l[3]||(l[3]=W(y=>h(t.$page.props.jetstream.flash.token),["prevent"]))},{default:v(()=>[T(g(t.$t("Copy")),1)]),_:1},8,["title"]),_(Z,{on:A.value,class:"px-2 py-2"},{default:v(()=>[T(g(t.$t("Copied.")),1)]),_:1},8,["on"])])):M("",!0)]),footer:v(()=>[_(K,{onClick:l[4]||(l[4]=y=>u.value=!1)},{default:v(()=>[T(g(t.$t("Close")),1)]),_:1})]),_:1},8,["show"]),_(q,{show:r.value,onClose:l[8]||(l[8]=y=>r.value=null)},{title:v(()=>[T(g(t.$t("API Token Permissions")),1)]),content:v(()=>[S("div",Ue,[(P(!0),x(Y,null,G(L.availablePermissions,y=>(P(),x("div",{key:y},[S("label",He,[_(ee,{checked:$(E).permissions,"onUpdate:checked":l[6]||(l[6]=j=>$(E).permissions=j),value:y},null,8,["checked","value"]),S("span",ze,g(y),1)])]))),128))])]),footer:v(()=>[_(K,{onClick:l[7]||(l[7]=y=>r.value=null)},{default:v(()=>[T(g(t.$t("Cancel")),1)]),_:1}),_(J,{class:X(["ms-3",{"opacity-25":$(E).processing}]),disabled:$(E).processing,onClick:p},{default:v(()=>[T(g(t.$t("Save")),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"]),_(ke,{show:e.value,onClose:l[10]||(l[10]=y=>e.value=null)},{title:v(()=>[T(g(t.$t("Delete API Token")),1)]),content:v(()=>[T(g(t.$t("Are you sure you would like to delete this API token?")),1)]),footer:v(()=>[_(K,{onClick:l[9]||(l[9]=y=>e.value=null)},{default:v(()=>[T(g(t.$t("Cancel")),1)]),_:1}),_(_e,{class:X(["ms-3",{"opacity-25":$(w).processing}]),disabled:$(w).processing,onClick:b},{default:v(()=>[T(g(t.$t("Delete")),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{ut as default};
