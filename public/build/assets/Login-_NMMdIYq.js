import{r as w,T as _,f as U,s as B,v as K,h as d,a as e,b as l,d as c,t as s,j as b,w as u,l as f,u as m,c as x,n as P,F as j,k as q,o as i,i as $,q as E}from"./app-BmMnv7Hf.js";import{_ as L}from"./Checkbox-C5vD6F-i.js";import{_ as M}from"./ValidationErrors-dE7HNvfK.js";import{_ as v}from"./SecondaryButton-3_x4XnxO.js";import{T as C}from"./TextInput-DPfNN3hz.js";import{P as R}from"./PrettyButton-DJ97II5T.js";import T from"./WebauthnLogin-C48CgrnD.js";import{_ as z}from"./AuthenticationCardLogo-Dq_5ZkKO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-CqlclkzZ.js";import"./Button-BWK-thSE.js";import"./WaitForKey-B88pVrrY.js";import"./index-DMlPNJkt.js";import"./ApplicationLogo-D_o_S5Vs.js";const I={class:"flex min-h-screen flex-col items-center bg-gray-100 pt-6 dark:bg-gray-900 sm:justify-center sm:pt-0"},O={class:"mb-2"},W={class:"mb-4 rounded-lg border bg-amber-50 p-6 dark:bg-amber-950"},A={class:"mb-2 text-center font-bold"},D={class:"mb-2"},G={class:"list mb-2 ps-3"},H={class:"list-disc"},J={class:"list-disc"},Q={class:"list-disc"},X={class:"list-disc"},Y={class:"mt-6 mb-12 flex w-full flex-col overflow-hidden bg-white shadow-md dark:bg-gray-800 sm:max-w-4xl sm:rounded-lg md:flex-row"},Z=["src","alt"],ee={class:"w-full"},te={class:"border-b border-gray-200 px-6 pb-6 pt-8 dark:border-gray-700"},se={class:"mb-4 text-center text-xl text-gray-800 dark:text-gray-200"},re={key:0,class:"mb-2 text-sm font-medium text-green-600 dark:text-green-400"},oe={key:1},ae={class:"mb-4 text-center text-lg text-gray-900 dark:text-gray-100"},le={class:"mb-4 max-w-xl text-gray-600 dark:text-gray-400"},ie={class:"mb-3"},ne={class:"mb-3"},me={class:"mb-3 block"},de={class:"flex items-center"},ce={class:"ms-2 text-sm text-gray-600 dark:text-gray-400"},ue={class:"flex items-center justify-end"},pe={class:"mt-3 block"},be={key:0,class:"mb-3 block text-sm font-medium text-gray-700 dark:text-gray-300"},fe={class:"flex flex-wrap"},ye=["src","alt"],he={class:"align-middle"},ge={key:0,class:"mt-3 block"},ve={class:"px-6 py-6 text-sm dark:text-gray-50"},qe={__name:"Login",props:{canResetPassword:Boolean,status:String,wallpaperUrl:String,providers:Object,publicKey:Object,userName:String},setup(n){const y=n,h=w(!0),p=w(y.publicKey),o=_({email:"",password:"",remember:!1}),k=_({});U(()=>y.publicKey,t=>{p.value=t});const V=B(()=>K.size(y.providers)>0),S=()=>{o.transform(t=>({...t,remember:o.remember?"on":""})).post(route("login"),{onFinish:()=>o.reset("password")})},F=t=>{k.transform(()=>({redirect:location.href,remember:o.remember?"on":""})).get(route("login.provider",{driver:t}),{preserveScroll:!0,onFinish:()=>{k.reset()}})},N=()=>{p.value=null,h.value=!0,E.reload({only:["publicKey"]})};return(t,r)=>(i(),d("div",I,[e("div",O,[l(z)]),e("div",W,[e("p",A,[r[4]||(r[4]=e("span",{class:"me-2"},"ðŸš§",-1)),c(" "+s(t.$t("Chandler is in beta."))+" ",1),r[5]||(r[5]=e("span",{class:"ms-2"},"ðŸš§",-1))]),e("p",D,s(t.$t("Compared to Monica:")),1),e("ul",G,[e("li",H,s(t.$t("it misses some of the features, the most important ones being the API and gift management,")),1),e("li",J,s(t.$t("you can't import any data from your current Monica account(yet),")),1),e("li",Q,s(t.$t("you can't even use your current username or password to sign in,")),1),e("li",X,s(t.$t("however, there are many, many new features that didn't exist before.")),1)]),e("p",null,s(t.$t("We hope you'll like it.")),1)]),e("div",Y,[e("img",{src:n.wallpaperUrl,class:"w-full sm:invisible sm:w-10/12 md:visible",alt:t.$t("Wallpaper")},null,8,Z),e("div",ee,[e("div",te,[e("h1",se,[r[6]||(r[6]=e("span",{class:"me-2"}," ðŸ‘‹ ",-1)),c(" "+s(t.$t("Sign in to your account")),1)]),l(M,{class:"mb-2"}),n.status?(i(),d("div",re,s(n.status),1)):b("",!0),n.publicKey&&h.value?(i(),d("div",oe,[e("div",ae,s(n.userName),1),e("div",le,s(t.$t("Connect with your security key")),1),l(T,{remember:!0,"public-key":p.value},null,8,["public-key"]),l(v,{class:"me-2 mt-4",onClick:r[0]||(r[0]=f(a=>h.value=!1,["prevent"]))},{default:u(()=>[c(s(t.$t("Use your password")),1)]),_:1})])):(i(),d("form",{key:2,onSubmit:f(S,["prevent"]),class:"dark:text-gray-800"},[e("div",ie,[l(C,{modelValue:m(o).email,"onUpdate:modelValue":r[1]||(r[1]=a=>m(o).email=a),label:t.$t("Email"),type:"email",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:"username",maxlength:255},null,8,["modelValue","label"])]),e("div",ne,[l(C,{modelValue:m(o).password,"onUpdate:modelValue":r[2]||(r[2]=a=>m(o).password=a),label:t.$t("Password"),type:"password","input-class":"block w-full",required:!0,autocomplete:"current-password",maxlength:255},null,8,["modelValue","label"])]),e("div",me,[e("label",de,[l(L,{checked:m(o).remember,"onUpdate:checked":r[3]||(r[3]=a=>m(o).remember=a),name:"remember"},null,8,["checked"]),e("span",ce,s(t.$t("Remember me")),1)])]),e("div",ue,[n.canResetPassword?(i(),x(m($),{key:0,href:t.route("password.request"),class:"text-sm text-blue-500 hover:underline"},{default:u(()=>[c(s(t.$t("Forgot your password?")),1)]),_:1},8,["href"])):b("",!0),l(R,{text:t.$t("Log in"),state:t.loadingState,class:P("save ms-4")},null,8,["text","state"])]),e("div",pe,[V.value?(i(),d("p",be,s(t.$t("Login with:")),1)):b("",!0),e("div",fe,[(i(!0),d(j,null,q(n.providers,(a,g)=>(i(),x(v,{key:g,class:"mb-2 me-2 inline w-32 align-middle",href:t.route("login.provider",{driver:g}),onClick:f(ke=>F(g),["prevent"])},{default:u(()=>[e("img",{src:a.logo,alt:a.name,class:"relative me-2 h-4 w-4 align-middle"},null,8,ye),e("span",he,s(a.name),1)]),_:2},1032,["href","onClick"]))),128))])]),p.value?(i(),d("div",ge,[l(v,{class:"me-2",onClick:f(N,["prevent"])},{default:u(()=>[c(s(t.$t("Use your security key")),1)]),_:1})])):b("",!0)],32))]),e("div",ve,[c(s(t.$t("New to Monica?"))+" ",1),l(m($),{href:t.route("register"),class:"text-blue-500 hover:underline"},{default:u(()=>[c(s(t.$t("Create an account")),1)]),_:1},8,["href"])])])])]))}};export{qe as default};
