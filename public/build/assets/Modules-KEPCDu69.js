import{P as b}from"./PrettyButton-DJ97II5T.js";import{d as f}from"./vuedraggable.umd-h0yOulbD.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{H as c,h as r,a as e,t as a,c as g,j as n,F as y,k as _,b as k,w as v,o as s,d as w}from"./app-BmMnv7Hf.js";const x={components:{PrettyButton:b,draggable:f},props:{data:{type:Object,default:null}},data(){return{showModuleList:!1,moduleLoaded:!1,allModules:[],localAllModules:[],localPageModules:[],addModuleModalShown:!1,drag:!1,form:{position:"",module_id:0,errors:[]}}},watch:{data(o){this.moduleLoaded=!0,this.addModuleModalShown=!1,this.localAllModules=o.modules_in_account,this.localPageModules=o.modules}},methods:{showModuleModal(){this.addModuleModalShown=!0},add(o){this.form.module_id=o.id,axios.post(this.data.url.store,this.form).then(t=>{this.flash(this.$t("The module has been added"),"success"),this.localPageModules.unshift(t.data.data),this.addModuleModalShown=!1,this.localAllModules[this.localAllModules.findIndex(i=>i.id===o.id)].already_used=!0}).catch(t=>{this.form.errors=t.response.data})},remove(o){axios.delete(o.url.destroy).then(()=>{this.flash(this.$t("The module has been removed"),"success"),this.localAllModules[this.localAllModules.findIndex(i=>i.id===o.id)].already_used=!1;var t=this.localPageModules.findIndex(i=>i.id===o.id);this.localPageModules.splice(t,1)}).catch(t=>{this.form.errors=t.response.data})},updatePosition(o){this.form.position=o.moved.newIndex+1,axios.post(o.moved.element.url.position,this.form).then(()=>{this.flash(this.$t("The position has been saved"),"success")}).catch(t=>{this.loadingState=null,this.errors=t.response.data})}}},C={class:"mb-4 mt-8 items-center justify-between border-b pb-3 sm:mt-0 sm:flex"},V={key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},H={class:"item-list border-b border-gray-200 bg-slate-50 py-2 pe-5 ps-2 text-sm dark:border-gray-700 dark:bg-slate-900"},P=["onClick"],A={key:1,class:"text-xs"},S={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},Z={class:"item-list flex items-center border-b border-gray-200 py-2 pe-5 ps-2 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},L={class:"flex w-full items-center justify-between"},B={class:"text-sm"},j=["onClick"],I={key:2},N={class:"rounded-lg border border-gray-200 bg-white p-5 text-center dark:border-gray-700 dark:bg-gray-900"},T={key:3},$={class:"rounded-lg border border-gray-200 bg-white p-5 text-center dark:border-gray-700 dark:bg-gray-900"};function F(o,t,i,D,l,u){const h=c("pretty-button"),m=c("draggable");return s(),r("div",null,[e("div",C,[e("h3",null,a(o.$t("Modules in this page")),1),!l.addModuleModalShown&&l.moduleLoaded?(s(),g(h,{key:0,text:o.$t("Add a module"),icon:"plus",onClick:u.showModuleModal},null,8,["text","onClick"])):n("",!0),l.addModuleModalShown&&l.moduleLoaded?(s(),g(h,{key:1,text:o.$t("Cancel"),onClick:t[0]||(t[0]=d=>l.addModuleModalShown=!1)},null,8,["text"])):n("",!0)]),l.addModuleModalShown?(s(),r("ul",V,[e("li",H,a(o.$t("Available modules:")),1),(s(!0),r(y,null,_(l.localAllModules,d=>(s(),r("li",{key:d.id,class:"item-list flex items-center justify-between border-b border-gray-200 py-2 pe-5 ps-2 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},[e("span",null,a(d.name),1),d.already_used?n("",!0):(s(),r("span",{key:0,class:"inline cursor-pointer text-blue-500 hover:underline",onClick:p=>u.add(d)},a(o.$t("Add")),9,P)),d.already_used?(s(),r("span",A,[t[1]||(t[1]=e("span",{class:"me-1"},"âœ…",-1)),w(" "+a(o.$t("Already used on this page")),1)])):n("",!0)]))),128))])):n("",!0),l.localPageModules.length>0?(s(),r("ul",S,[k(m,{list:l.localPageModules,"item-key":"id","component-data":{name:"fade"},handle:".handle",onChange:u.updatePosition},{item:v(({element:d})=>[e("div",Z,[t[2]||(t[2]=e("div",{class:"me-2"},[e("svg",{class:"handle cursor-move",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7 7H9V9H7V7Z",fill:"currentColor"}),e("path",{d:"M11 7H13V9H11V7Z",fill:"currentColor"}),e("path",{d:"M17 7H15V9H17V7Z",fill:"currentColor"}),e("path",{d:"M7 11H9V13H7V11Z",fill:"currentColor"}),e("path",{d:"M13 11H11V13H13V11Z",fill:"currentColor"}),e("path",{d:"M15 11H17V13H15V11Z",fill:"currentColor"}),e("path",{d:"M9 15H7V17H9V15Z",fill:"currentColor"}),e("path",{d:"M11 15H13V17H11V15Z",fill:"currentColor"}),e("path",{d:"M17 15H15V17H17V15Z",fill:"currentColor"})])],-1)),e("div",L,[e("span",null,a(d.name),1),e("ul",B,[e("li",{class:"inline cursor-pointer text-red-500 hover:text-red-900",onClick:p=>u.remove(d)},a(o.$t("Remove")),9,j)])])])]),_:1},8,["list","onChange"])])):n("",!0),l.localPageModules.length===0&&l.moduleLoaded?(s(),r("div",I,[e("p",N,a(o.$t("Add at least one module.")),1)])):n("",!0),l.moduleLoaded?n("",!0):(s(),r("div",T,[e("p",$,a(o.$t("Please select a page on the left to load modules.")),1)]))])}const z=M(x,[["render",F],["__scopeId","data-v-14f35ff4"]]);export{z as default};
