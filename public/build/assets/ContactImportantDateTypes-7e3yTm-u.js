import{P as T}from"./PrettyButton-DJ97II5T.js";import{P as v}from"./PrettySpan-DbeWKi_L.js";import{T as x}from"./TextInput-DPfNN3hz.js";import{E as S}from"./Errors-DkF-M9C7.js";import{H as m,h as l,a as r,d as k,t as c,c as w,j as n,l as y,b as d,n as u,F as M,k as C,o as a}from"./app-BmMnv7Hf.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={components:{PrettyButton:T,PrettySpan:v,TextInput:x,Errors:S},props:{layoutData:{type:Object,default:null},data:{type:Object,default:null}},data(){return{loadingState:"",createTypeModalShown:!1,editTypeModalShownId:0,localTypes:[],form:{label:"",internal_type:"",can_be_deleted:"",errors:[]}}},mounted(){this.localTypes=this.data.contact_important_date_types},methods:{showTypeModal(){this.form.label="",this.createTypeModalShown=!0,this.$nextTick().then(()=>{this.$refs.newtype.focus()})},edit(e){this.form.label=e.label,this.form.can_be_deleted=e.can_be_deleted,this.form.internal_type=e.internal_type,this.editTypeModalShownId=e.id},submit(){this.loadingState="loading",axios.post(this.data.url.contact_date_important_date_type_store,this.form).then(e=>{this.flash(this.$t("The type has been created"),"success"),this.localTypes.unshift(e.data.data),this.loadingState=null,this.createTypeModalShown=!1}).catch(e=>{this.loadingState=null,this.form.errors=e.response.data})},update(e){this.loadingState="loading",axios.put(e.url.update,this.form).then(t=>{this.flash(this.$t("The type has been updated"),"success"),this.localTypes[this.localTypes.findIndex(h=>h.id===e.id)]=t.data.data,this.loadingState=null,this.editTypeModalShownId=0}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},destroy(e){confirm(this.$t("Are you sure? This action cannot be undone."))&&axios.delete(e.url.destroy).then(()=>{this.flash(this.$t("The type has been deleted"),"success");var t=this.localTypes.findIndex(h=>h.id===e.id);this.localTypes.splice(t,1)}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})}}},j={class:"mb-12"},E={class:"mb-3 mt-8 items-center justify-between sm:mt-0 sm:flex"},N={class:"mb-4 sm:mb-0"},P={class:"border-b border-gray-200 p-5 dark:border-gray-700"},B={class:"flex justify-between p-5"},D={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},$={key:0,class:"flex items-center justify-between px-5 py-2"},A={class:"text-base"},q={key:0,class:"me-2 inline-block rounded bg-neutral-200 px-2 py-1 text-xs font-semibold text-neutral-500 last:me-0"},z={class:"text-sm"},F=["onClick"],K={class:"text-blue-500 hover:underline"},O=["onClick"],U=["onSubmit"],H={class:"border-b border-gray-200 p-5 dark:border-gray-700"},L={class:"flex justify-between p-5"},R={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},G={class:"p-5 text-center"};function J(e,t,h,Q,s,p){const b=m("pretty-button"),f=m("errors"),g=m("text-input"),_=m("pretty-span");return a(),l("div",j,[r("div",E,[r("h3",N,[t[7]||(t[7]=r("span",{class:"me-1"}," 📁 ",-1)),k(" "+c(e.$t("All the important date types used in the vault")),1)]),s.createTypeModalShown?n("",!0):(a(),w(b,{key:0,text:e.$t("Add a type"),icon:"plus",onClick:p.showTypeModal},null,8,["text","onClick"]))]),s.createTypeModalShown?(a(),l("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-900",onSubmit:t[3]||(t[3]=y(o=>p.submit(),["prevent"]))},[r("div",P,[d(f,{errors:s.form.errors},null,8,["errors"]),d(g,{ref:"newtype",modelValue:s.form.label,"onUpdate:modelValue":t[0]||(t[0]=o=>s.form.label=o),label:e.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,class:u("mb-4"),onEscKeyPressed:t[1]||(t[1]=o=>s.createTypeModalShown=!1)},null,8,["modelValue","label"])]),r("div",B,[d(_,{text:e.$t("Cancel"),class:u("me-3"),onClick:t[2]||(t[2]=o=>s.createTypeModalShown=!1)},null,8,["text"]),d(b,{text:e.$t("Add"),state:s.loadingState,icon:"plus",class:u("save")},null,8,["text","state"])])],32)):n("",!0),s.localTypes.length>0?(a(),l("ul",D,[(a(!0),l(M,null,C(s.localTypes,o=>(a(),l("li",{key:o.id,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800 hover:dark:bg-slate-900"},[s.editTypeModalShownId!==o.id?(a(),l("div",$,[r("span",A,[k(c(o.label)+" ",1),o.internal_type?(a(),l("span",q,c(o.internal_type),1)):n("",!0)]),r("ul",z,[r("li",{class:"inline cursor-pointer",onClick:i=>p.edit(o)},[r("span",K,c(e.$t("Edit")),1)],8,F),o.can_be_deleted?(a(),l("li",{key:0,class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900 hover:dark:text-red-100",onClick:i=>p.destroy(o)},c(e.$t("Delete")),9,O)):n("",!0)])])):n("",!0),s.editTypeModalShownId===o.id?(a(),l("form",{key:1,class:"item-list border-b border-gray-200 bg-gray-50 hover:bg-slate-50 dark:border-gray-700 dark:bg-gray-900 dark:bg-slate-900 hover:dark:bg-slate-800 hover:dark:bg-slate-900",onSubmit:y(i=>p.update(o),["prevent"])},[r("div",H,[d(f,{errors:s.form.errors},null,8,["errors"]),d(g,{ref_for:!0,ref:"rename",modelValue:s.form.label,"onUpdate:modelValue":t[4]||(t[4]=i=>s.form.label=i),label:e.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,class:u("mb-4"),onEscKeyPressed:t[5]||(t[5]=i=>s.editTypeModalShownId=0)},null,8,["modelValue","label"])]),r("div",L,[d(_,{text:e.$t("Cancel"),class:u("me-3"),onClick:t[6]||(t[6]=y(i=>s.editTypeModalShownId=0,["prevent"]))},null,8,["text"]),d(b,{text:e.$t("Rename"),state:s.loadingState,icon:"check",class:u("save")},null,8,["text","state"])])],40,U)):n("",!0)]))),128))])):n("",!0),s.localTypes.length===0?(a(),l("div",R,[r("p",G,c(e.$t("Date types are essential as they let you categorize dates that you add to a contact.")),1)])):n("",!0)])}const se=I(V,[["render",J],["__scopeId","data-v-f616ef5e"]]);export{se as default};
