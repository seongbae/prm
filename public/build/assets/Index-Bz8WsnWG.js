import{i as S,H as m,c as C,w as g,o as u,a as e,t as a,b as s,d as x,j as y,h as p,n as c,l as v}from"./app-BmMnv7Hf.js";import{L as V}from"./Layout-Csq83W0y.js";import{P as I}from"./PrettyButton-DJ97II5T.js";import{P as R}from"./PrettySpan-DbeWKi_L.js";import{T as H}from"./TextInput-DPfNN3hz.js";import{E as Z}from"./Errors-DkF-M9C7.js";import{d as j}from"./vuedraggable.umd-h0yOulbD.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={components:{InertiaLink:S,Layout:V,PrettyButton:I,PrettySpan:R,TextInput:H,Errors:Z,draggable:j},props:{layoutData:{type:Object,default:null},data:{type:Object,default:null}},data(){return{loadingState:"",createGroupTypeModalShown:!1,createRoleModalShown:!1,roleGroupTypeId:0,editGroupTypeId:0,editRoleId:0,localGroupTypes:[],form:{label:"",position:"",errors:[]}}},mounted(){this.localGroupTypes=this.data.group_types},methods:{showCreateGroupTypeModal(){this.form.label="",this.form.position="",this.createGroupTypeModalShown=!0,this.createRoleModalShown=!1,this.roleGroupTypeId=0,this.editGroupTypeId=0,this.editRoleId=0,this.$nextTick().then(()=>{this.$refs.newGroupType.focus()})},showCreateRoleModal(o){this.form.label="",this.form.position="",this.createRoleModalShown=!0,this.roleGroupTypeId=o.id,this.editGroupTypeId=0,this.editRoleId=0,this.createGroupTypeModalShown=!1,this.$nextTick().then(()=>{this.$refs.newRole.focus()})},renameGroupTypeModal(o){this.form.label=o.label,this.editGroupTypeId=o.id,this.roleGroupTypeId=0,this.editRoleId=0,this.createRoleModalShown=!1,this.createGroupTypeModalShown=!1,this.$nextTick().then(()=>this.$refs.renameGroupType.focus())},renameRoleModal(o){this.form.label=o.label,this.editRoleId=o.id,this.roleGroupTypeId=0,this.editGroupTypeId=0,this.createRoleModalShown=!1,this.createGroupTypeModalShown=!1,this.$nextTick().then(()=>this.$refs.renameRole.focus())},submit(){this.loadingState="loading",axios.post(this.data.url.store,this.form).then(o=>{this.flash(this.$t("The group type has been created"),"success"),this.localGroupTypes.push(o.data.data),this.loadingState=null,this.createGroupTypeModalShown=!1}).catch(o=>{this.loadingState=null,this.form.errors=o.response.data})},update(o){this.loadingState="loading",axios.put(o.url.update,this.form).then(t=>{this.flash(this.$t("The group type has been updated"),"success"),this.localGroupTypes[this.localGroupTypes.findIndex(n=>n.id===o.id)]=t.data.data,this.loadingState=null,this.editGroupTypeId=0}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},destroy(o){confirm(this.$t("Are you sure? This action cannot be undone."))&&axios.delete(o.url.destroy).then(()=>{this.flash(this.$t("The group type has been deleted"),"success");var t=this.localGroupTypes.findIndex(n=>n.id===o.id);this.localGroupTypes.splice(t,1)}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},updatePosition(o){this.form.position=o.moved.newIndex+1,axios.post(o.moved.element.url.position,this.form).then(()=>{this.flash(this.$t("The position has been saved"),"success")}).catch(t=>{this.loadingState=null,this.errors=t.response.data})},submitRole(o){this.loadingState="loading",axios.post(o.url.store,this.form).then(t=>{this.flash(this.$t("The role has been created"),"success");var n=this.localGroupTypes.findIndex(h=>h.id===o.id);this.localGroupTypes[n].group_type_roles.push(t.data.data),this.loadingState=null,this.roleGroupTypeId=0,this.createRoleModalShown=!1}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},updateRole(o){this.loadingState="loading",axios.put(o.url.update,this.form).then(t=>{this.flash(this.$t("The role has been updated"),"success");var n=this.localGroupTypes.findIndex(r=>r.id===o.group_type_id),h=this.localGroupTypes[n].group_type_roles.findIndex(r=>r.id===o.id);this.localGroupTypes[n].group_type_roles[h]=t.data.data,this.loadingState=null,this.roleGroupTypeId=0,this.editRoleId=0}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},destroyRole(o){confirm(this.$t("Are you sure? This action cannot be undone."))&&axios.delete(o.url.destroy).then(()=>{this.flash(this.$t("The role has been deleted"),"success");var t=this.localGroupTypes.findIndex(h=>h.id===o.group_type_id),n=this.localGroupTypes[t].group_type_roles.findIndex(h=>h.id===o.id);this.localGroupTypes[t].group_type_roles.splice(n,1)}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})}}},$={class:"bg-white dark:bg-gray-900 sm:border-b"},N={class:"max-w-8xl mx-auto hidden px-4 py-2 sm:px-6 md:block"},E={class:"flex items-baseline justify-between space-x-6"},A={class:"text-sm"},D={class:"me-2 inline text-gray-600 dark:text-gray-400"},L={class:"me-2 inline"},q={class:"me-2 inline"},z={class:"inline"},K={class:"relative sm:mt-20"},U={class:"mx-auto max-w-3xl px-2 py-2 sm:px-6 sm:py-6 lg:px-8"},O={class:"mb-6 mt-8 items-center justify-between sm:mt-0 sm:flex"},W={class:"mb-4 sm:mb-0"},Y={class:"mb-6 flex rounded border bg-slate-50 px-3 py-2 text-sm dark:border-gray-700 dark:bg-slate-900"},F={class:"border-b border-gray-200 p-5 dark:border-gray-700"},J={class:"flex justify-between p-5"},Q={key:1,class:"mb-6"},X={key:0},ee={class:"item-list mb-2 rounded-lg border border-gray-200 bg-white py-2 pe-5 ps-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-gray-900 hover:dark:bg-slate-800"},te={class:"mb-3 flex items-center justify-between"},oe={class:"me-2 flex"},re={class:"text-sm"},se=["onClick"],le={class:"text-blue-500 hover:underline"},ie=["onClick"],ae={class:"ms-8"},ne={class:"mb-1 text-sm text-gray-500"},de={key:0},ue={class:"item-list mb-2 rounded-lg border border-gray-200 bg-white py-2 pe-5 ps-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-gray-900 hover:dark:bg-slate-800"},pe={class:"flex items-center justify-between"},he={class:"me-2 flex"},ce={class:"text-sm"},me=["onClick"],ye={class:"text-blue-500 hover:underline"},be=["onClick"],fe=["onSubmit"],ge={class:"border-b border-gray-200 p-5 dark:border-gray-700"},ve={class:"flex justify-between p-5"},we=["onClick"],ke=["onSubmit"],_e={class:"border-b border-gray-200 p-5 dark:border-gray-700"},xe={class:"flex justify-between p-5"},Te={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},Ge={class:"p-5 text-center"},Ce=["onClick"],Me=["onSubmit"],Se={class:"border-b border-gray-200 p-5 dark:border-gray-700"},Ve={class:"flex justify-between p-5"},Ie={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},Re={class:"p-5 text-center"};function He(o,t,n,h,r,d){const T=m("InertiaLink"),f=m("pretty-button"),w=m("errors"),k=m("text-input"),_=m("pretty-span"),G=m("draggable"),M=m("layout");return u(),C(M,{"layout-data":n.layoutData},{default:g(()=>[e("nav",$,[e("div",N,[e("div",E,[e("ul",A,[e("li",D,a(o.$t("You are here:")),1),e("li",L,[s(T,{href:n.data.url.settings,class:"text-blue-500 hover:underline"},{default:g(()=>[x(a(o.$t("Settings")),1)]),_:1},8,["href"])]),t[13]||(t[13]=e("li",{class:"relative me-2 inline"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("li",q,[s(T,{href:n.data.url.personalize,class:"text-blue-500 hover:underline"},{default:g(()=>[x(a(o.$t("Personalize your account")),1)]),_:1},8,["href"])]),t[14]||(t[14]=e("li",{class:"relative me-2 inline"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("li",z,a(o.$t("Group types")),1)])])])]),e("main",K,[e("div",U,[e("div",O,[e("h3",W,[t[15]||(t[15]=e("span",{class:"me-1"}," ðŸ‘¥ ",-1)),x(" "+a(o.$t("All the group types")),1)]),r.createGroupTypeModalShown?y("",!0):(u(),C(f,{key:0,text:o.$t("Add a group type"),icon:"plus",onClick:d.showCreateGroupTypeModal},null,8,["text","onClick"]))]),e("div",Y,[t[16]||(t[16]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 grow pe-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[e("p",null,a(o.$t("A group is two or more people together. It can be a family, a household, a sport club. Whatever is important to you.")),1)])]),r.createGroupTypeModalShown?(u(),p("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:t[3]||(t[3]=v(l=>d.submit(),["prevent"]))},[e("div",F,[s(w,{errors:r.form.errors},null,8,["errors"]),s(k,{ref:"newGroupType",modelValue:r.form.label,"onUpdate:modelValue":t[0]||(t[0]=l=>r.form.label=l),label:o.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:t[1]||(t[1]=l=>r.createGroupTypeModalShown=!1)},null,8,["modelValue","label"])]),e("div",J,[s(_,{text:o.$t("Cancel"),class:c("me-3"),onClick:t[2]||(t[2]=l=>r.createGroupTypeModalShown=!1)},null,8,["text"]),s(f,{text:o.$t("Save"),state:r.loadingState,icon:"plus",class:c("save")},null,8,["text","state"])])],32)):y("",!0),r.localGroupTypes.length>0?(u(),p("div",Q,[s(G,{list:r.localGroupTypes,"item-key":"id","component-data":{name:"fade"},handle:".handle",onChange:d.updatePosition},{item:g(({element:l})=>[r.editGroupTypeId!==l.id?(u(),p("div",X,[e("div",ee,[e("div",te,[e("div",oe,[t[17]||(t[17]=e("svg",{class:"handle me-2 cursor-move",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7 7H9V9H7V7Z",fill:"currentColor"}),e("path",{d:"M11 7H13V9H11V7Z",fill:"currentColor"}),e("path",{d:"M17 7H15V9H17V7Z",fill:"currentColor"}),e("path",{d:"M7 11H9V13H7V11Z",fill:"currentColor"}),e("path",{d:"M13 11H11V13H13V11Z",fill:"currentColor"}),e("path",{d:"M15 11H17V13H15V11Z",fill:"currentColor"}),e("path",{d:"M9 15H7V17H9V15Z",fill:"currentColor"}),e("path",{d:"M11 15H13V17H11V15Z",fill:"currentColor"}),e("path",{d:"M17 15H15V17H17V15Z",fill:"currentColor"})],-1)),e("span",null,a(l.label),1)]),e("ul",re,[e("li",{class:"inline cursor-pointer",onClick:i=>d.renameGroupTypeModal(l)},[e("span",le,a(o.$t("Rename")),1)],8,se),e("li",{class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:i=>d.destroy(l)},a(o.$t("Delete")),9,ie)])]),e("div",ae,[e("p",ne,a(o.$t("Roles:")),1),s(G,{list:l.group_type_roles,"item-key":"id","component-data":{name:"fade"},handle:".handle",onChange:d.updatePosition},{item:g(({element:i})=>[r.editRoleId!==i.id?(u(),p("div",de,[e("div",ue,[e("div",pe,[e("div",he,[t[18]||(t[18]=e("svg",{class:"handle me-2 cursor-move",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7 7H9V9H7V7Z",fill:"currentColor"}),e("path",{d:"M11 7H13V9H11V7Z",fill:"currentColor"}),e("path",{d:"M17 7H15V9H17V7Z",fill:"currentColor"}),e("path",{d:"M7 11H9V13H7V11Z",fill:"currentColor"}),e("path",{d:"M13 11H11V13H13V11Z",fill:"currentColor"}),e("path",{d:"M15 11H17V13H15V11Z",fill:"currentColor"}),e("path",{d:"M9 15H7V17H9V15Z",fill:"currentColor"}),e("path",{d:"M11 15H13V17H11V15Z",fill:"currentColor"}),e("path",{d:"M17 15H15V17H17V15Z",fill:"currentColor"})],-1)),e("span",null,a(i.label),1)]),e("ul",ce,[e("li",{class:"inline cursor-pointer",onClick:b=>d.renameRoleModal(i)},[e("span",ye,a(o.$t("Rename")),1)],8,me),e("li",{class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:b=>d.destroyRole(i)},a(o.$t("Delete")),9,be)])])])])):(u(),p("form",{key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:v(b=>d.updateRole(i),["prevent"])},[e("div",ge,[s(w,{errors:r.form.errors},null,8,["errors"]),s(k,{ref:"renameRole",modelValue:r.form.label,"onUpdate:modelValue":t[4]||(t[4]=b=>r.form.label=b),label:o.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:t[5]||(t[5]=b=>{r.editRoleId=0,r.editGroupTypeId=0})},null,8,["modelValue","label"])]),e("div",ve,[s(_,{text:o.$t("Cancel"),class:c("me-3"),onClick:t[6]||(t[6]=b=>{r.editRoleId=0,r.editGroupTypeId=0})},null,8,["text"]),s(f,{text:o.$t("Rename"),state:r.loadingState,icon:"check",class:c("save")},null,8,["text","state"])])],40,fe))]),_:2},1032,["list","onChange"]),l.group_type_roles.length!==0&&!r.createRoleModalShown&&r.roleGroupTypeId!==l.id?(u(),p("span",{key:0,class:"inline cursor-pointer text-sm text-blue-500 hover:underline",onClick:i=>d.showCreateRoleModal(l)},a(o.$t("add a role")),9,we)):y("",!0),r.createRoleModalShown&&r.roleGroupTypeId===l.id?(u(),p("form",{key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:v(i=>d.submitRole(l),["prevent"])},[e("div",_e,[s(w,{errors:r.form.errors},null,8,["errors"]),s(k,{ref:"newRole",modelValue:r.form.label,"onUpdate:modelValue":t[7]||(t[7]=i=>r.form.label=i),label:o.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:t[8]||(t[8]=i=>{r.createRoleModalShown=!1,r.roleGroupTypeId=0})},null,8,["modelValue","label"])]),e("div",xe,[s(_,{text:o.$t("Cancel"),class:c("me-3"),onClick:t[9]||(t[9]=i=>{r.createRoleModalShown=!1,r.roleGroupTypeId=0})},null,8,["text"]),s(f,{text:o.$t("Save"),state:r.loadingState,icon:"plus",class:c("save")},null,8,["text","state"])])],40,ke)):y("",!0),l.group_type_roles.length===0&&!r.createRoleModalShown&&r.roleGroupTypeId!==l.id?(u(),p("div",Te,[e("p",Ge,[x(a(o.$t("No roles yet."))+" ",1),e("span",{class:"block cursor-pointer text-sm text-blue-500 hover:underline",onClick:i=>d.showCreateRoleModal(l)},a(o.$t("add a role")),9,Ce)])])):y("",!0)])])])):(u(),p("form",{key:1,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:v(i=>d.update(l),["prevent"])},[e("div",Se,[s(w,{errors:r.form.errors},null,8,["errors"]),s(k,{ref:"renameGroupType",modelValue:r.form.label,"onUpdate:modelValue":t[10]||(t[10]=i=>r.form.label=i),label:o.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:t[11]||(t[11]=i=>r.editGroupTypeId=0)},null,8,["modelValue","label"])]),e("div",Ve,[s(_,{text:o.$t("Cancel"),class:c("me-3"),onClick:t[12]||(t[12]=v(i=>r.editGroupTypeId=0,["prevent"]))},null,8,["text"]),s(f,{text:o.$t("Rename"),state:r.loadingState,icon:"check",class:c("save")},null,8,["text","state"])])],40,Me))]),_:1},8,["list","onChange"])])):y("",!0),r.localGroupTypes.length===0?(u(),p("div",Ie,[e("p",Re,a(o.$t("Group types let you group people together.")),1)])):y("",!0)])])]),_:1},8,["layout-data"])}const De=P(B,[["render",He],["__scopeId","data-v-0867c75f"]]);export{De as default};
