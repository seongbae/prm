import{i as S,H as h,c as _,w as p,o as n,a as e,t as l,b as r,d as b,j as m,h as i,n as f,l as w,F as M,k as C}from"./app-BmMnv7Hf.js";import{L as I}from"./Layout-Csq83W0y.js";import{P as j}from"./PrettyButton-DJ97II5T.js";import{P as V}from"./PrettySpan-DbeWKi_L.js";import{T as $}from"./TextInput-DPfNN3hz.js";import{E as B}from"./Errors-DkF-M9C7.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={components:{InertiaLink:S,Layout:I,PrettyButton:j,PrettySpan:V,TextInput:$,Errors:B},props:{layoutData:{type:Object,default:null},data:{type:Object,default:null}},data(){return{loadingState:"",createTemplateModalShown:!1,renameTemplateModalShownId:0,localTemplates:[],form:{name:"",errors:[]}}},mounted(){this.localTemplates=this.data.templates},methods:{showTemplateModal(){this.form.name="",this.createTemplateModalShown=!0,this.renameTemplateModalShownId=0,this.$nextTick().then(()=>{this.$refs.newTemplate.focus()})},showUpdateTemplateModal(t){this.form.name=t.name,this.renameTemplateModalShownId=t.id,this.createTemplateModalShown=!1,this.$nextTick().then(()=>{this.$refs.rename[0].focus()})},submit(){this.loadingState="loading",axios.post(this.data.url.template_store,this.form).then(t=>{this.flash(this.$t("The template has been created"),"success"),this.localTemplates.unshift(t.data.data),this.loadingState=null,this.createTemplateModalShown=!1}).catch(t=>{this.loadingState=null,this.form.errors=t.response.data})},update(t){this.loadingState="loading",axios.put(t.url.update,this.form).then(s=>{this.flash(this.$t("The template has been updated"),"success"),this.localTemplates[this.localTemplates.findIndex(d=>d.id===t.id)]=s.data.data,this.loadingState=null,this.renameTemplateModalShownId=0}).catch(s=>{this.loadingState=null,this.form.errors=s.response.data})},destroy(t){confirm(this.$t("Are you sure? This will remove the template from all contacts, but won’t delete the contacts themselves."))&&axios.delete(t.url.destroy).then(()=>{this.flash(this.$t("The template has been deleted"),"success");var s=this.localTemplates.findIndex(d=>d.id===t.id);this.localTemplates.splice(s,1)}).catch(s=>{this.loadingState=null,this.form.errors=s.response.data})}}},N={class:"bg-white dark:bg-gray-900 sm:border-b"},z={class:"max-w-8xl mx-auto hidden px-4 py-2 sm:px-6 md:block"},E={class:"flex items-baseline justify-between space-x-6"},D={class:"text-sm"},U={class:"me-2 inline text-gray-600 dark:text-gray-400"},A={class:"me-2 inline"},Y={class:"me-2 inline"},q={class:"inline"},F={class:"relative sm:mt-20"},K={class:"mx-auto max-w-3xl px-2 py-2 sm:px-6 sm:py-6 lg:px-8"},O={class:"mb-6 mt-8 items-center justify-between sm:mt-0 sm:flex"},R={class:"mb-4 sm:mb-0"},H={class:"mb-6 flex rounded border bg-slate-50 px-3 py-2 text-sm dark:border-gray-700 dark:bg-slate-900"},W={class:"mb-2"},G={class:"border-b border-gray-200 p-5 dark:border-gray-700"},J={class:"flex justify-between p-5"},Q={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},X={key:0,class:"flex items-center justify-between px-5 py-2"},Z={class:"text-sm"},ee=["onClick"],te={class:"text-blue-500 hover:underline"},se=["onClick"],oe=["onSubmit"],ae={class:"border-b border-gray-200 p-5 dark:border-gray-700"},le={class:"flex justify-between p-5"},re={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},ne={class:"p-5 text-center"};function ie(t,s,d,de,o,c){const g=h("InertiaLink"),y=h("pretty-button"),k=h("errors"),v=h("text-input"),x=h("pretty-span"),T=h("layout");return n(),_(T,{"layout-data":d.layoutData},{default:p(()=>[e("nav",N,[e("div",z,[e("div",E,[e("ul",D,[e("li",U,l(t.$t("You are here:")),1),e("li",A,[r(g,{href:d.data.url.settings,class:"text-blue-500 hover:underline"},{default:p(()=>[b(l(t.$t("Settings")),1)]),_:1},8,["href"])]),s[7]||(s[7]=e("li",{class:"relative me-2 inline"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("li",Y,[r(g,{href:d.data.url.personalize,class:"text-blue-500 hover:underline"},{default:p(()=>[b(l(t.$t("Personalize your account")),1)]),_:1},8,["href"])]),s[8]||(s[8]=e("li",{class:"relative me-2 inline"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("li",q,l(t.$t("Templates")),1)])])])]),e("main",F,[e("div",K,[e("div",O,[e("h3",R,[s[9]||(s[9]=e("span",{class:"me-1"}," 📐 ",-1)),b(" "+l(t.$t("All the templates")),1)]),o.createTemplateModalShown?m("",!0):(n(),_(y,{key:0,text:t.$t("Add a template"),icon:"plus",onClick:c.showTemplateModal},null,8,["text","onClick"]))]),e("div",H,[s[10]||(s[10]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 grow pe-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[e("p",W,l(t.$t("Templates let you customize what data should be displayed on your contacts. You can define as many templates as you want, and choose which template should be used on which contact.")),1),e("p",null,l(t.$t("You need at least one template for contacts to be displayed. Without a template, Monica won’t know which information it should display.")),1)])]),o.createTemplateModalShown?(n(),i("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:s[3]||(s[3]=w(a=>c.submit(),["prevent"]))},[e("div",G,[r(k,{errors:o.form.errors},null,8,["errors"]),r(v,{ref:"newTemplate",modelValue:o.form.name,"onUpdate:modelValue":s[0]||(s[0]=a=>o.form.name=a),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:s[1]||(s[1]=a=>o.createTemplateModalShown=!1)},null,8,["modelValue","label"])]),e("div",J,[r(x,{text:t.$t("Cancel"),class:f("me-3"),onClick:s[2]||(s[2]=a=>o.createTemplateModalShown=!1)},null,8,["text"]),r(y,{text:t.$t("Save"),state:o.loadingState,icon:"plus",class:f("save")},null,8,["text","state"])])],32)):m("",!0),o.localTemplates.length>0?(n(),i("ul",Q,[(n(!0),i(M,null,C(o.localTemplates,a=>(n(),i("li",{key:a.id,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800"},[o.renameTemplateModalShownId!==a.id?(n(),i("div",X,[r(g,{href:a.url.show,class:"text-blue-500 hover:underline"},{default:p(()=>[b(l(a.name),1)]),_:2},1032,["href"]),e("ul",Z,[e("li",{class:"me-4 inline cursor-pointer",onClick:u=>c.showUpdateTemplateModal(a)},[e("span",te,l(t.$t("Rename")),1)],8,ee),a.can_be_deleted?(n(),i("li",{key:0,class:"inline cursor-pointer text-red-500 hover:text-red-900",onClick:u=>c.destroy(a)},l(t.$t("Delete")),9,se)):m("",!0)])])):m("",!0),o.renameTemplateModalShownId===a.id?(n(),i("form",{key:1,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 hover:dark:bg-slate-800",onSubmit:w(u=>c.update(a),["prevent"])},[e("div",ae,[r(k,{errors:o.form.errors},null,8,["errors"]),r(v,{ref_for:!0,ref:"rename",modelValue:o.form.name,"onUpdate:modelValue":s[4]||(s[4]=u=>o.form.name=u),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:s[5]||(s[5]=u=>o.renameTemplateModalShownId=0)},null,8,["modelValue","label"])]),e("div",le,[r(x,{text:t.$t("Cancel"),class:f("me-3"),onClick:s[6]||(s[6]=w(u=>o.renameTemplateModalShownId=0,["prevent"]))},null,8,["text"]),r(y,{text:t.$t("Rename"),state:o.loadingState,icon:"check",class:f("save")},null,8,["text","state"])])],40,oe)):m("",!0)]))),128))])):m("",!0),o.localTemplates.length===0?(n(),i("div",re,[e("p",ne,l(t.$t("Create at least one template to use Monica.")),1)])):m("",!0)])])]),_:1},8,["layout-data"])}const ge=P(L,[["render",ie],["__scopeId","data-v-29492175"]]);export{ge as default};
